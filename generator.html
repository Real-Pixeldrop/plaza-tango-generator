<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plaza Tango 2026 ‚Äî G√©n√©rateur de Posts</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style>
    :root {
      --bordeaux: #4A1A1F;
      --bordeaux-dark: #0d0506;
      --gold: #C9A96E;
      --red-accent: #A63D45;
      --bg-dark: #0a0a0a;
      --bg-card: #141414;
      --bg-hover: #1a1a1a;
      --border: #222;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--bg-dark);
      min-height: 100vh;
      font-family: 'DM Sans', sans-serif;
      color: #fff;
    }

    /* HEADER */
    .app-header {
      padding: 25px 40px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      background: var(--bg-dark);
      z-index: 100;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 30px;
    }

    .app-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .app-logo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
    }

    .app-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .app-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 20px;
      text-transform: uppercase;
    }

    .app-title span { color: var(--gold); }

    .tabs {
      display: flex;
      gap: 5px;
      background: var(--bg-card);
      padding: 5px;
      border-radius: 10px;
    }

    .tab {
      padding: 10px 24px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.05em;
      color: rgba(255,255,255,0.5);
      background: transparent;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab:hover { color: rgba(255,255,255,0.8); }
    .tab.active { background: var(--gold); color: #000; }

    .tab .count {
      display: inline-block;
      margin-left: 8px;
      padding: 2px 8px;
      background: rgba(255,255,255,0.15);
      border-radius: 10px;
      font-size: 11px;
    }

    .tab.active .count { background: rgba(0,0,0,0.2); }

    .header-stats {
      display: flex;
      gap: 25px;
    }

    .stat { text-align: center; }

    .stat-value {
      font-family: 'Archivo Black', sans-serif;
      font-size: 24px;
      color: var(--gold);
    }

    .stat-label {
      font-size: 11px;
      color: rgba(255,255,255,0.4);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .header-actions {
      display: flex;
      gap: 10px;
    }

    .btn {
      padding: 12px 24px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.05em;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
    }

    .btn-primary {
      background: var(--gold);
      color: #000;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(201, 169, 110, 0.3);
    }

    .btn-secondary {
      background: var(--bg-card);
      color: #fff;
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      border-color: var(--gold);
      color: var(--gold);
    }

    /* FILTER BAR */
    .filter-bar {
      padding: 15px 40px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 15px;
      border-bottom: 1px solid var(--border);
      background: var(--bg-card);
    }

    .filter-label {
      font-size: 12px;
      color: rgba(255,255,255,0.4);
    }

    .filter-select {
      padding: 8px 16px;
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: #fff;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      cursor: pointer;
    }

    /* GRID */
    .content-area {
      padding: 30px 40px;
    }

    .posts-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .posts-grid.storys-grid {
      grid-template-columns: repeat(5, 1fr);
    }

    .post-card {
      background: var(--bg-card);
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid transparent;
    }

    .post-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      border-color: var(--gold);
    }

    .post-card.published { opacity: 0.5; }
    .post-card.published:hover { opacity: 0.8; }

    .post-preview {
      position: relative;
      aspect-ratio: 1;
      overflow: hidden;
    }

    .post-preview.story-preview {
      aspect-ratio: 9/16;
    }

    .post-inner {
      width: 1080px;
      height: 1080px;
      transform-origin: top left;
    }

    .post-inner.story-inner {
      width: 1080px;
      height: 1920px;
    }

    .post-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 6px 10px;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(10px);
      border-radius: 6px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.1em;
      color: var(--gold);
      text-transform: uppercase;
    }

    .post-info {
      padding: 15px;
    }

    .post-date {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 11px;
      font-weight: 600;
      color: var(--gold);
      letter-spacing: 0.05em;
      margin-bottom: 6px;
    }

    .post-title-text {
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 10px;
      line-height: 1.3;
    }

    .post-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .post-status-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: rgba(255,255,255,0.5);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
    }

    .status-dot.published { background: #4CAF50; }

    .post-slides {
      display: flex;
      gap: 3px;
    }

    .slide-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
    }

    .slide-dot.filled { background: var(--gold); }

    /* MODAL */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.95);
      display: none;
      z-index: 1000;
      overflow-y: auto;
    }

    .modal.active { display: flex; }

    .modal-container {
      display: flex;
      width: 100%;
      min-height: 100vh;
    }

    .modal-preview {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      position: relative;
    }

    .modal-carousel {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-slide {
      display: none;
      flex-direction: column;
      align-items: center;
    }

    .carousel-slide.active { display: flex; }

    .carousel-post-wrapper {
      box-shadow: 0 50px 100px rgba(0, 0, 0, 0.6);
    }

    .carousel-post-inner {
      transform-origin: top left;
    }

    .carousel-nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 50px;
      height: 50px;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      transition: all 0.2s;
      z-index: 10;
    }

    .carousel-nav-btn:hover {
      background: var(--gold);
      color: #000;
    }

    .carousel-nav-btn.prev { left: 20px; }
    .carousel-nav-btn.next { right: 20px; }

    .carousel-dots {
      display: flex;
      gap: 8px;
      margin-top: 25px;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      cursor: pointer;
      transition: all 0.2s;
    }

    .carousel-dot.active { background: var(--gold); }

    .modal-sidebar {
      width: 400px;
      background: var(--bg-card);
      border-left: 1px solid var(--border);
      padding: 40px;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 420px;
      width: 45px;
      height: 45px;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 20px;
      transition: all 0.2s;
    }

    .modal-close:hover {
      background: var(--gold);
      color: #000;
    }

    .sidebar-header { margin-bottom: 25px; }

    .sidebar-phase {
      display: inline-block;
      padding: 6px 12px;
      background: rgba(201, 169, 110, 0.15);
      border-radius: 100px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.1em;
      color: var(--gold);
      text-transform: uppercase;
      margin-bottom: 15px;
    }

    .sidebar-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 28px;
      line-height: 1.1;
      margin-bottom: 10px;
    }

    .sidebar-date {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 14px;
      color: rgba(255,255,255,0.5);
    }

    .sidebar-section { margin-bottom: 20px; }

    .sidebar-section-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.15em;
      color: var(--gold);
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .sidebar-description {
      font-size: 14px;
      line-height: 1.6;
      color: rgba(255,255,255,0.7);
    }

    /* Image changer */
    .image-changer {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px;
      background: var(--bg-dark);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .image-changer:hover { background: var(--bg-hover); }

    .image-changer-icon {
      width: 40px;
      height: 40px;
      background: var(--bordeaux);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .image-changer-text {
      flex: 1;
    }

    .image-changer-label {
      font-weight: 600;
      font-size: 13px;
      margin-bottom: 2px;
    }

    .image-changer-hint {
      font-size: 11px;
      color: rgba(255,255,255,0.4);
    }

    .image-input { display: none; }

    .sidebar-status {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: var(--bg-dark);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .sidebar-status:hover { background: var(--bg-hover); }

    .status-checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid var(--gold);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .status-checkbox.checked { background: var(--gold); }

    .status-checkbox svg {
      width: 14px;
      height: 14px;
      stroke: #000;
      stroke-width: 3;
      opacity: 0;
    }

    .status-checkbox.checked svg { opacity: 1; }

    .status-text { flex: 1; }
    .status-label { font-weight: 600; font-size: 13px; margin-bottom: 2px; }
    .status-hint { font-size: 11px; color: rgba(255,255,255,0.4); }

    .sidebar-slides {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .slide-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--bg-dark);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid transparent;
    }

    .slide-item:hover { background: var(--bg-hover); }
    .slide-item.active { border-color: var(--gold); }

    .slide-thumb {
      width: 45px;
      height: 45px;
      background: var(--bordeaux);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .slide-info { flex: 1; }

    .slide-type {
      font-size: 10px;
      color: var(--gold);
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .slide-name {
      font-size: 12px;
      color: rgba(255,255,255,0.7);
    }

    .sidebar-actions {
      margin-top: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .btn-block {
      width: 100%;
      padding: 14px;
      text-align: center;
    }

    /* SLIDE CONTENT - Citation slide */
    .slide-citation {
      width: 1080px;
      height: 1080px;
      background: linear-gradient(180deg, #0d0506 0%, #4A1A1F 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 100px;
      text-align: center;
      position: relative;
    }

    .slide-citation .bg-shapes {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .citation-content {
      position: relative;
      z-index: 1;
      max-width: 850px;
    }

    .citation-icon {
      font-size: 80px;
      color: var(--gold);
      opacity: 0.3;
      margin-bottom: 40px;
    }

    .citation-text {
      font-family: 'Archivo Black', sans-serif;
      font-size: 52px;
      color: #fff;
      line-height: 1.25;
      margin-bottom: 50px;
    }

    .citation-author {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 22px;
      color: var(--gold);
      letter-spacing: 0.15em;
      text-transform: uppercase;
    }

    .citation-footer {
      position: absolute;
      bottom: 60px;
      left: 60px;
      right: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .citation-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .citation-logo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
    }

    .citation-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .citation-brand-text {
      font-family: 'Archivo Black', sans-serif;
      font-size: 18px;
      color: #fff;
    }

    .citation-url {
      font-family: 'DM Sans', sans-serif;
      font-size: 16px;
      color: rgba(255,255,255,0.5);
    }

    /* CTA SLIDE */
    .slide-cta .cta-content {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
    }

    .cta-icon {
      font-size: 80px;
      margin-bottom: 10px;
    }

    .cta-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 85px;
      color: #fff;
      text-align: center;
      line-height: 0.95;
      text-transform: uppercase;
    }

    .cta-subtitle {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 26px;
      font-weight: 600;
      color: var(--gold);
      letter-spacing: 0.15em;
      text-transform: uppercase;
    }

    .cta-features {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 20px 0;
    }

    .cta-feature {
      font-family: 'DM Sans', sans-serif;
      font-size: 24px;
      color: rgba(255,255,255,0.85);
      text-align: center;
    }

    .cta-button {
      display: flex;
      align-items: center;
      gap: 15px;
      background: var(--gold);
      color: #000;
      padding: 24px 50px;
      border-radius: 100px;
      margin-top: 20px;
    }

    .cta-button span {
      font-family: 'Archivo Black', sans-serif;
      font-size: 28px;
      letter-spacing: 0.05em;
    }

    .cta-button svg {
      width: 28px;
      height: 28px;
    }

    .cta-url {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 20px;
      font-weight: 600;
      color: rgba(255,255,255,0.5);
      margin-top: 15px;
    }

    .cta-social {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--gold);
    }

    /* CONTENT SLIDE */
    .slide-content {
      padding: 80px;
      justify-content: flex-start;
      text-align: left;
    }

    .content-slide-body {
      position: relative;
      z-index: 1;
      width: 100%;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .content-slide-header {
      margin-bottom: 50px;
    }

    .content-slide-cat {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--gold);
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-bottom: 20px;
    }

    .content-slide-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 56px;
      color: #fff;
      line-height: 1.1;
      text-transform: uppercase;
    }

    .content-slide-list {
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .content-slide-item {
      display: flex;
      align-items: flex-start;
      gap: 20px;
    }

    .content-slide-bullet {
      width: 12px;
      height: 12px;
      background: var(--gold);
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 10px;
    }

    .content-slide-text {
      font-family: 'DM Sans', sans-serif;
      font-size: 28px;
      color: rgba(255,255,255,0.9);
      line-height: 1.4;
    }

    /* NEWSLETTER GRID */
    .newsletter-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 25px;
    }

    .email-card {
      background: var(--bg-card);
      border-radius: 16px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid transparent;
    }

    .email-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      border-color: var(--gold);
    }

    .email-card.sent { opacity: 0.5; }
    .email-card.sent:hover { opacity: 0.8; }

    .email-header {
      background: linear-gradient(135deg, var(--bordeaux) 0%, var(--bordeaux-dark) 100%);
      padding: 25px;
      position: relative;
    }

    .email-type {
      display: inline-block;
      padding: 5px 12px;
      background: rgba(201, 169, 110, 0.2);
      border-radius: 100px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.15em;
      color: var(--gold);
      text-transform: uppercase;
      margin-bottom: 12px;
    }

    .email-subject {
      font-family: 'Archivo Black', sans-serif;
      font-size: 20px;
      color: #fff;
      line-height: 1.2;
      margin-bottom: 8px;
    }

    .email-preheader {
      font-size: 13px;
      color: rgba(255,255,255,0.6);
      line-height: 1.4;
    }

    .email-preview {
      padding: 20px 25px;
      background: #1a1a1a;
      border-top: 1px solid var(--border);
      max-height: 180px;
      overflow: hidden;
      position: relative;
    }

    .email-preview::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: linear-gradient(transparent, #1a1a1a);
    }

    .email-preview-content {
      font-size: 12px;
      color: rgba(255,255,255,0.7);
      line-height: 1.6;
    }

    .email-preview-content strong {
      color: var(--gold);
    }

    .email-info {
      padding: 20px 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 1px solid var(--border);
    }

    .email-date {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 12px;
      font-weight: 600;
      color: var(--gold);
    }

    .email-audience {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: rgba(255,255,255,0.5);
    }

    .audience-icon {
      font-size: 14px;
    }

    .email-stats {
      display: flex;
      gap: 15px;
    }

    .email-stat {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 11px;
      color: rgba(255,255,255,0.4);
    }

    /* KPI Dashboard */
    .kpi-dashboard {
      padding: 40px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .kpi-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    .kpi-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 28px;
      color: #fff;
    }

    .kpi-actions {
      display: flex;
      gap: 10px;
    }

    .kpi-summary {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }

    .kpi-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 25px;
      border: 1px solid var(--border);
    }

    .kpi-card-label {
      font-size: 12px;
      color: rgba(255,255,255,0.5);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 10px;
    }

    .kpi-card-value {
      font-family: 'Archivo Black', sans-serif;
      font-size: 36px;
      color: var(--gold);
    }

    .kpi-card-trend {
      font-size: 13px;
      margin-top: 8px;
    }

    .kpi-card-trend.up { color: #4ade80; }
    .kpi-card-trend.down { color: #f87171; }

    .kpi-table-container {
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .kpi-table {
      width: 100%;
      border-collapse: collapse;
    }

    .kpi-table th {
      background: rgba(0,0,0,0.3);
      padding: 15px 12px;
      text-align: left;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: rgba(255,255,255,0.6);
      font-weight: 600;
      border-bottom: 1px solid var(--border);
    }

    .kpi-table td {
      padding: 12px;
      font-size: 14px;
      border-bottom: 1px solid var(--border);
      color: rgba(255,255,255,0.8);
    }

    .kpi-table tr:last-child td {
      border-bottom: none;
    }

    .kpi-table tr:hover td {
      background: rgba(255,255,255,0.02);
    }

    .kpi-table input {
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px 10px;
      color: #fff;
      font-size: 14px;
      width: 100%;
      max-width: 100px;
    }

    .kpi-table input:focus {
      outline: none;
      border-color: var(--gold);
      background: rgba(201, 169, 110, 0.1);
    }

    .kpi-table input.notes-input {
      max-width: 200px;
    }

    .kpi-week-label {
      font-weight: 600;
      color: #fff;
    }

    .kpi-week-date {
      font-size: 12px;
      color: rgba(255,255,255,0.4);
    }

    .kpi-highlight {
      background: rgba(201, 169, 110, 0.1);
    }

    .kpi-highlight td {
      border-color: rgba(201, 169, 110, 0.2);
    }

    .kpi-chart-container {
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border);
      padding: 25px;
      margin-bottom: 30px;
    }

    .kpi-chart-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 16px;
      color: #fff;
      margin-bottom: 20px;
    }

    .kpi-chart {
      height: 200px;
      display: flex;
      align-items: flex-end;
      gap: 8px;
      padding: 20px 0;
      border-bottom: 1px solid var(--border);
    }

    .chart-bar-group {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .chart-bars {
      display: flex;
      align-items: flex-end;
      gap: 3px;
      height: 150px;
    }

    .chart-bar {
      width: 12px;
      border-radius: 3px 3px 0 0;
      min-height: 2px;
      transition: height 0.3s ease;
    }

    .chart-bar.abonnes {
      background: linear-gradient(180deg, #C9A96E 0%, #a8894d 100%);
    }

    .chart-bar.inscrits {
      background: linear-gradient(180deg, #4ade80 0%, #22c55e 100%);
    }

    .chart-label {
      font-size: 10px;
      color: rgba(255,255,255,0.5);
    }

    .kpi-chart-legend {
      display: flex;
      gap: 20px;
      margin-top: 15px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: rgba(255,255,255,0.7);
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 3px;
    }

    /* Email Modal */
    #email-modal {
      overflow-y: auto;
    }

    #email-modal .modal-container {
      min-height: auto;
      padding: 40px;
      align-items: flex-start;
    }

    .email-modal-content {
      max-width: 650px;
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      flex-shrink: 0;
    }

    .email-hero {
      display: none;
    }

    .email-modal-header {
      position: relative;
      padding: 60px 40px;
      text-align: center;
      min-height: 280px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .email-modal-header .header-bg {
      position: absolute;
      inset: 0;
      z-index: 0;
    }

    .email-modal-header .header-bg img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .email-modal-header .header-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        180deg,
        rgba(74, 26, 31, 0.7) 0%,
        rgba(74, 26, 31, 0.85) 50%,
        rgba(74, 26, 31, 0.95) 100%
      );
      z-index: 1;
    }

    .email-modal-logo {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin: 0 auto 20px;
      overflow: hidden;
      border: 3px solid rgba(255,255,255,0.3);
      position: relative;
      z-index: 2;
      background: rgba(0,0,0,0.2);
    }

    .email-modal-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .email-modal-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 32px;
      color: #fff;
      margin-bottom: 10px;
      position: relative;
      z-index: 2;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    .email-modal-subtitle {
      font-size: 16px;
      color: rgba(255,255,255,0.85);
      position: relative;
      z-index: 2;
    }

    .email-modal-body {
      padding: 40px;
      color: #333;
      font-size: 15px;
      line-height: 1.7;
    }

    .email-modal-body h2 {
      font-family: 'Archivo Black', sans-serif;
      font-size: 22px;
      color: var(--bordeaux);
      margin: 25px 0 15px;
    }

    .email-modal-body p {
      margin-bottom: 15px;
    }

    .email-modal-body .highlight {
      background: rgba(201, 169, 110, 0.15);
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid var(--gold);
      margin: 20px 0;
    }

    .email-modal-body .cta-btn {
      display: inline-block;
      background: var(--gold);
      color: #000;
      padding: 16px 40px;
      border-radius: 100px;
      font-family: 'Archivo Black', sans-serif;
      font-size: 16px;
      text-decoration: none;
      margin: 20px 0;
    }

    .email-modal-body ul {
      margin: 15px 0;
      padding-left: 20px;
    }

    .email-modal-body li {
      margin-bottom: 8px;
    }

    .email-modal-footer {
      background: #f5f5f5;
      padding: 30px 40px;
      text-align: center;
      font-size: 12px;
      color: #666;
    }

    .email-modal-footer a {
      color: var(--bordeaux);
    }

    /* RENDER ZONE */
    .render-zone {
      position: fixed;
      left: 0;
      top: 0;
      z-index: -1;
      pointer-events: none;
      visibility: hidden;
    }

    .render-zone.rendering {
      visibility: visible;
    }

    /* POST STYLES */
    .post {
      width: 1080px;
      height: 1080px;
      position: relative;
      overflow: hidden;
      font-family: 'DM Sans', sans-serif;
    }

    .post.story { height: 1920px; }

    .bg-shapes {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .bg-shape {
      position: absolute;
      border-radius: 50%;
      opacity: 0.04;
    }

    .bg-shape-1 {
      width: 800px;
      height: 800px;
      top: -400px;
      right: -200px;
      border: 80px solid var(--gold);
    }

    .bg-shape-2 {
      width: 600px;
      height: 600px;
      bottom: -300px;
      left: -150px;
      border: 60px solid var(--bordeaux);
      opacity: 0.06;
    }

    .bg-shape-3 {
      width: 400px;
      height: 400px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border: 40px solid var(--gold);
      opacity: 0.03;
    }

    /* STYLE 1 */
    .post.style-1 { background: #000; }

    .post.style-1 .bg-photo {
      position: absolute;
      inset: 0;
    }

    .post.style-1 .bg-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.55;
    }

    .post.style-1 .overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.1) 40%, rgba(0,0,0,0.75) 100%);
    }

    .post.style-1 .content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 60px;
    }

    .post.style-1.story .content { padding: 80px 60px; }

    .post.style-1 .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .post.style-1 .brand {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .post.style-1 .brand-logo {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      overflow: hidden;
    }

    .post.style-1 .brand-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-1 .brand-text {
      display: flex;
      flex-direction: column;
    }

    .post.style-1 .brand-name {
      font-family: 'Archivo Black', sans-serif;
      font-size: 22px;
      color: #fff;
      text-transform: uppercase;
      line-height: 1;
    }

    .post.style-1 .brand-edition {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: rgba(255,255,255,0.7);
      letter-spacing: 0.15em;
      margin-top: 5px;
    }

    .post.style-1 .date-pill {
      background: var(--gold);
      color: #000;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.08em;
      padding: 16px 32px;
      border-radius: 8px;
    }

    .post.style-1.story .date-pill {
      font-size: 18px;
      padding: 18px 36px;
    }

    .post.style-1 .main-content {
      display: flex;
      flex-direction: column;
      gap: 25px;
    }

    .post.style-1.story .main-content {
      flex: 1;
      justify-content: center;
      gap: 35px;
    }

    .post.style-1 .category {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.35em;
      color: var(--gold);
      text-transform: uppercase;
    }

    .post.style-1.story .category { font-size: 24px; }

    .post.style-1 .title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 150px;
      color: #fff;
      line-height: 0.88;
      text-transform: uppercase;
      letter-spacing: -0.02em;
    }

    .post.style-1.story .title { font-size: 130px; }

    .post.style-1 .subtitle {
      font-family: 'DM Sans', sans-serif;
      font-size: 28px;
      font-weight: 400;
      color: rgba(255,255,255,0.85);
      max-width: 700px;
      line-height: 1.45;
    }

    .post.style-1.story .subtitle { font-size: 32px; max-width: 100%; }

    .post.style-1 .bottom-bar {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .post.style-1 .location {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 500;
      color: rgba(255,255,255,0.5);
      letter-spacing: 0.15em;
    }

    .post.style-1.story .location { font-size: 20px; }

    .post.style-1 .website-box {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .post.style-1 .website-logo {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      overflow: hidden;
      border: 1px solid rgba(201, 169, 110, 0.3);
    }

    .post.style-1 .website-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-1 .website {
      font-family: 'DM Sans', sans-serif;
      font-size: 16px;
      color: rgba(255,255,255,0.5);
    }

    .post.style-1.story .website { font-size: 20px; }

    /* STYLE 2 */
    .post.style-2 { background: var(--bordeaux-dark); }

    .post.style-2 .photo-half {
      position: absolute;
      top: 0;
      left: 0;
      width: 55%;
      height: 100%;
      overflow: hidden;
    }

    .post.style-2 .photo-half img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-2 .photo-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, rgba(74, 26, 31, 0.5) 0%, rgba(74, 26, 31, 0.2) 50%, rgba(13, 5, 6, 0.95) 100%);
    }

    .post.style-2 .content-half {
      position: absolute;
      top: 0;
      right: 0;
      width: 52%;
      height: 100%;
      padding: 70px 60px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .post.style-2 .brand-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .post.style-2 .brand-logo {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      overflow: hidden;
    }

    .post.style-2 .brand-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-2 .brand-info {
      display: flex;
      flex-direction: column;
    }

    .post.style-2 .festival-name {
      font-family: 'Archivo Black', sans-serif;
      font-size: 18px;
      color: #fff;
      text-transform: uppercase;
      line-height: 1;
    }

    .post.style-2 .festival-edition {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 11px;
      font-weight: 600;
      color: rgba(255,255,255,0.7);
      letter-spacing: 0.15em;
      margin-top: 4px;
    }

    .post.style-2 .event-cat {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 14px;
      font-weight: 700;
      letter-spacing: 0.25em;
      color: var(--gold);
      text-transform: uppercase;
      margin-bottom: 15px;
    }

    .post.style-2 .event-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 75px;
      color: #fff;
      line-height: 0.92;
      text-transform: uppercase;
      margin-bottom: 25px;
    }

    .post.style-2 .accent-line {
      width: 80px;
      height: 5px;
      background: var(--gold);
      margin-bottom: 25px;
    }

    .post.style-2 .description {
      font-family: 'DM Sans', sans-serif;
      font-size: 24px;
      font-weight: 400;
      color: rgba(255,255,255,0.8);
      line-height: 1.5;
      margin-bottom: 40px;
    }

    .post.style-2 .meta {
      display: flex;
      gap: 40px;
    }

    .post.style-2 .meta-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .post.style-2 .meta-label {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 14px;
      font-weight: 700;
      letter-spacing: 0.2em;
      color: var(--gold);
      text-transform: uppercase;
    }

    .post.style-2 .meta-value {
      font-family: 'Archivo Black', sans-serif;
      font-size: 36px;
      color: #fff;
    }

    .post.style-2 .date-badge {
      margin-top: 30px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.1em;
      color: var(--gold);
      padding: 12px 20px;
      background: rgba(201, 169, 110, 0.1);
      border-radius: 8px;
      display: inline-block;
    }

    .post.style-2 .footer-info {
      position: absolute;
      bottom: 50px;
      left: 52%;
      right: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .post.style-2 .footer-location {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: 0.15em;
      color: rgba(255,255,255,0.4);
    }

    .post.style-2 .footer-site {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .post.style-2 .footer-logo {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      overflow: hidden;
      border: 1px solid rgba(201, 169, 110, 0.3);
    }

    .post.style-2 .footer-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-2 .footer-url {
      font-family: 'DM Sans', sans-serif;
      font-size: 16px;
      color: rgba(255,255,255,0.5);
    }

    /* STYLE 5 */
    .post.style-5 { background: #000; }

    .post.style-5 .bg {
      position: absolute;
      inset: 0;
    }

    .post.style-5 .bg img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-5 .gradient {
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0) 25%, rgba(0,0,0,0) 45%, rgba(74,26,31,0.75) 80%, rgba(74,26,31,0.98) 100%);
    }

    .post.style-5.story .gradient {
      background: linear-gradient(180deg, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0) 20%, rgba(0,0,0,0) 50%, rgba(74,26,31,0.75) 85%, rgba(74,26,31,0.98) 100%);
    }

    .post.style-5 .header {
      position: absolute;
      top: 55px;
      left: 60px;
      right: 60px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .post.style-5 .brand-block {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .post.style-5 .brand-logo {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      overflow: hidden;
    }

    .post.style-5 .brand-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-5 .brand-text {
      display: flex;
      flex-direction: column;
    }

    .post.style-5 .brand-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 22px;
      color: #fff;
      text-transform: uppercase;
      line-height: 1;
    }

    .post.style-5 .brand-edition {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: rgba(255,255,255,0.7);
      letter-spacing: 0.15em;
      margin-top: 5px;
    }

    .post.style-5 .pill {
      background: var(--gold);
      color: #000;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.08em;
      padding: 16px 32px;
      border-radius: 8px;
    }

    .post.style-5.story .pill {
      font-size: 18px;
      padding: 18px 36px;
    }

    .post.style-5 .content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 65px;
      padding-bottom: 130px;
    }

    .post.style-5.story .content { padding-bottom: 180px; }

    .post.style-5 .main {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .post.style-5.story .main { gap: 30px; }

    .post.style-5 .cat {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.3em;
      color: var(--gold);
      text-transform: uppercase;
    }

    .post.style-5.story .cat { font-size: 22px; }

    .post.style-5 .big-title {
      font-family: 'Archivo Black', sans-serif;
      font-size: 95px;
      color: #fff;
      line-height: 0.92;
      text-transform: uppercase;
      letter-spacing: -0.01em;
    }

    .post.style-5.story .big-title { font-size: 90px; }

    .post.style-5 .desc {
      font-family: 'DM Sans', sans-serif;
      font-size: 24px;
      color: rgba(255,255,255,0.8);
      max-width: 600px;
      line-height: 1.5;
    }

    .post.style-5.story .desc { font-size: 28px; max-width: 100%; }

    .post.style-5 .footer-box {
      position: absolute;
      bottom: 65px;
      left: 65px;
      right: 65px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .post.style-5 .footer-location {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: 0.15em;
      color: rgba(255,255,255,0.4);
    }

    .post.style-5.story .footer-location { font-size: 20px; }

    .post.style-5 .footer-site {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .post.style-5 .footer-logo {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      overflow: hidden;
      border: 1px solid rgba(201, 169, 110, 0.3);
    }

    .post.style-5 .footer-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .post.style-5 .footer-url {
      font-family: 'DM Sans', sans-serif;
      font-size: 16px;
      color: rgba(255,255,255,0.5);
    }

    .post.style-5.story .footer-url { font-size: 20px; }

    /* Swipe up for stories */
    .post.story .swipe-up {
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .swipe-arrow {
      width: 50px;
      height: 50px;
      border: 2px solid rgba(255,255,255,0.5);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: bounce 2s infinite;
    }

    .swipe-arrow svg {
      width: 24px;
      height: 24px;
      stroke: #fff;
      stroke-width: 2;
    }

    .swipe-text {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 600;
      color: rgba(255,255,255,0.7);
      letter-spacing: 0.15em;
      text-transform: uppercase;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    /* RESPONSIVE */
    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

    @media (max-width: 1200px) {
      .posts-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 900px) {
      .posts-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .newsletter-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      /* Header */
      .app-header {
        flex-direction: column;
        padding: 15px;
        gap: 15px;
        position: relative;
      }
      .header-left {
        flex-direction: column;
        width: 100%;
        gap: 15px;
      }
      .app-brand {
        justify-content: center;
      }
      .tabs {
        width: 100%;
        justify-content: center;
        flex-wrap: wrap;
        gap: 8px;
      }
      .tab {
        padding: 8px 12px;
        font-size: 12px;
      }
      .header-stats {
        margin-left: 0;
        justify-content: center;
        width: 100%;
      }
      .stat {
        padding: 8px 15px;
      }
      .stat-value {
        font-size: 20px;
      }
      .stat-label {
        font-size: 10px;
      }

      /* Filtres */
      .filter-bar {
        flex-wrap: wrap;
        gap: 10px;
        padding: 15px;
      }
      .filter-select {
        flex: 1;
        min-width: 120px;
      }
      .filter-label {
        display: none;
      }

      /* Grille */
      .main-content {
        padding: 15px;
      }
      .posts-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
      }
      .newsletter-grid {
        grid-template-columns: 1fr;
      }

      /* Modal */
      .modal {
        padding: 0;
        overflow-y: auto;
      }
      .modal-container {
        flex-direction: column;
        min-height: auto;
      }
      .modal-preview {
        padding: 50px 10px 20px;
        min-height: auto;
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }
      .modal-carousel {
        width: 100%;
        display: flex;
        justify-content: center;
      }
      .carousel-slide {
        align-items: center;
      }
      .modal-close {
        top: 10px;
        right: 10px;
        width: 35px;
        height: 35px;
        font-size: 18px;
      }
      .modal-sidebar {
        width: 100%;
        max-width: none;
        padding: 20px 15px;
        border-left: none;
        border-top: 1px solid var(--border);
      }
      .sidebar-title {
        font-size: 20px;
      }
      .carousel-nav-btn {
        width: 35px;
        height: 35px;
      }
      #btn-prev { left: 5px; }
      #btn-next { right: 5px; }
      .carousel-dots {
        margin-top: 15px;
      }

      /* Slides sidebar */
      .slides-section {
        display: none;
      }

      /* KPI */
      .kpi-dashboard {
        padding: 15px;
      }
      .kpi-header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }
      .kpi-header .btn {
        width: 100%;
      }
      .kpi-summary {
        flex-direction: column;
        gap: 15px;
      }
      .kpi-card {
        min-width: auto;
        width: 100%;
      }
      .kpi-chart-section {
        padding: 20px 15px;
      }
      .kpi-chart-container {
        overflow-x: auto;
      }
      #kpi-chart {
        min-width: 500px;
      }
      .kpi-table-container {
        overflow-x: auto;
      }
      .kpi-table {
        min-width: 500px;
      }
    }

    @media (max-width: 480px) {
      /* Header */
      .app-title {
        font-size: 16px;
      }
      .tabs {
        gap: 5px;
      }
      .tab {
        padding: 6px 10px;
        font-size: 11px;
      }
      .tab .count {
        display: none;
      }

      /* Grille */
      .posts-grid {
        grid-template-columns: 1fr;
      }
      .post-info {
        padding: 10px;
      }
      .post-title-text {
        font-size: 13px;
      }

      /* Modal */
      .modal-sidebar {
        padding: 10px;
      }
      .sidebar-actions {
        flex-direction: column;
      }
      .sidebar-actions .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <header class="app-header">
    <div class="header-left">
      <div class="app-brand">
        <div class="app-logo"><img src="logo.png" alt=""></div>
        <h1 class="app-title">PLAZA <span>TANGO</span></h1>
      </div>
      <div class="tabs">
        <button class="tab active" data-tab="posts">Posts <span class="count" id="posts-count">36</span></button>
        <button class="tab" data-tab="storys">Storys <span class="count" id="storys-count">36</span></button>
        <button class="tab" data-tab="newsletter">Newsletter <span class="count" id="newsletter-count">8</span></button>
        <button class="tab" data-tab="kpi">KPI</button>
      </div>
    </div>
    <div class="header-stats" style="margin-left: auto;">
      <div class="stat">
        <div class="stat-value" id="stat-total">64</div>
        <div class="stat-label">Total</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="stat-published">0</div>
        <div class="stat-label">Publi√©s</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="stat-remaining">64</div>
        <div class="stat-label">Restants</div>
      </div>
    </div>
  </header>

  <div class="filter-bar">
    <span class="filter-label">Jour :</span>
    <select class="filter-select" id="day-filter" onchange="renderGrid()">
      <option value="all">Tous</option>
      <option value="lundi">üéì Lundi (√âducatif)</option>
      <option value="mercredi">üìö Mercredi (√âducatif)</option>
      <option value="vendredi">üé§ Vendredi (Artistes)</option>
      <option value="samedi">üì± Samedi (Interactif)</option>
      <option value="dimanche">üé¨ Dimanche (Coulisses)</option>
      <option value="concours">üéÅ Concours</option>
    </select>
    <span class="filter-label">Phase :</span>
    <select class="filter-select" id="phase-filter" onchange="renderGrid()">
      <option value="all">Toutes</option>
      <option value="1">Phase 1 ¬∑ Lancement</option>
      <option value="2">Phase 2 ¬∑ Maestros</option>
      <option value="3">Phase 3 ¬∑ DJs & Milongas</option>
      <option value="4">Phase 4 ¬∑ Countdown</option>
      <option value="5">Phase 5 ¬∑ Festival</option>
      <option value="6">Phase 6 ¬∑ Apr√®s</option>
    </select>
    <span class="filter-label">Statut :</span>
    <select class="filter-select" id="status-filter" onchange="renderGrid()">
      <option value="all">Tous</option>
      <option value="pending">√Ä publier</option>
      <option value="published">Publi√©s</option>
    </select>
  </div>

  <div class="content-area">
    <div class="posts-grid" id="posts-grid"></div>
  </div>

  <div class="modal" id="modal">
    <button class="modal-close" onclick="closeModal()">‚úï</button>
    <div class="modal-container">
      <div class="modal-preview">
        <div class="modal-carousel">
          <button class="carousel-nav-btn prev" onclick="prevSlide()" id="btn-prev">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"/>
            </svg>
          </button>
          <div class="carousel-slides" id="carousel-slides"></div>
          <button class="carousel-nav-btn next" onclick="nextSlide()" id="btn-next">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="modal-sidebar">
        <div class="sidebar-header">
          <div class="sidebar-phase" id="sidebar-phase">Phase 1</div>
          <h2 class="sidebar-title" id="sidebar-title">Titre du post</h2>
          <div class="sidebar-date" id="sidebar-date">15 f√©vrier 2026</div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Description Instagram</div>
          <p class="sidebar-description" id="sidebar-description"></p>
        </div>

        <div class="sidebar-section" id="slides-section">
          <div class="sidebar-section-title">Slides du carousel</div>
          <div class="sidebar-slides" id="sidebar-slides"></div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Image</div>
          <label class="image-changer">
            <div class="image-changer-icon">üì∑</div>
            <div class="image-changer-text">
              <div class="image-changer-label">Changer l'image</div>
              <div class="image-changer-hint">Cliquer pour s√©lectionner une image</div>
            </div>
            <input type="file" accept="image/*" class="image-input" id="image-input" onchange="changeImage(event)">
          </label>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-status" onclick="toggleCurrentPublished()">
            <div class="status-checkbox" id="status-checkbox">
              <svg viewBox="0 0 24 24" fill="none"><polyline points="20 6 9 17 4 12"/></svg>
            </div>
            <div class="status-text">
              <div class="status-label" id="status-label">√Ä publier</div>
              <div class="status-hint">Cliquer pour changer le statut</div>
            </div>
          </div>
        </div>

        <div class="sidebar-actions">
          <button class="btn btn-primary btn-block" onclick="downloadCurrent()">T√©l√©charger PNG</button>
          <button class="btn btn-secondary btn-block" onclick="closeModal()">Fermer</button>
        </div>
      </div>
    </div>
  </div>

  <div class="render-zone" id="render-zone"></div>

  <!-- Modal Email -->
  <div class="modal" id="email-modal">
    <button class="modal-close" onclick="closeEmailModal()">‚úï</button>
    <div class="modal-container" id="email-modal-container"></div>
  </div>

  <script>
    // Citations c√©l√®bres du tango
    const tangoCitations = [
      { text: "Le tango est une pens√©e triste qui se danse.", author: "Enrique Santos Disc√©polo" },
      { text: "Le tango, c'est l'expression verticale d'un d√©sir horizontal.", author: "George Bernard Shaw" },
      { text: "Le tango est la danse de ceux qui portent leur solitude √† deux.", author: "Julio Cort√°zar" },
      { text: "Dans le tango, l'homme propose mais c'est la femme qui dispose.", author: "Proverbe argentin" },
      { text: "Le tango n'est pas dans les pas, il est entre les pas.", author: "Anonyme porte√±o" },
      { text: "Le tango se danse du c≈ìur, pas des pieds.", author: "Carlos Gavito" },
      { text: "Trois minutes de tango peuvent changer une vie.", author: "Miguel √Ångel Zotto" },
      { text: "Le tango, c'est marcher ensemble en r√™vant.", author: "Gustavo Naveira" }
    ];

    // Textes descriptifs pour les artistes
    const artistTexts = {
      'sondertango': { title: 'SONDERTANGO', text: 'Orchestre de tango argentin r√©put√© pour son √©nergie sur sc√®ne. Leur musique fait vibrer les milongas du monde entier depuis plus de 10 ans.' },
      'silbando': { title: 'SILBANDO ORQUESTA', text: 'Formation musicale authentique venue de Buenos Aires. Leur son traditionnel transporte les danseurs dans le Buenos Aires des ann√©es 40.' },
      'marianne-mauricio': { title: 'MARIANNE & MAURICIO', text: 'Duo finlando-argentin reconnu pour leur connexion exceptionnelle. Leur style √©l√©gant et leur p√©dagogie font d\'eux des maestros tr√®s demand√©s.' },
      'yanina-neri': { title: 'YANINA & NERI', text: 'Yanina Qui√±ones et Neri Pili√∫ incarnent l\'√©l√©gance porte√±a. Leur musicalit√© et leur technique impeccable inspirent les danseurs du monde entier.' },
      'sofia-dario': { title: 'SOFIA & DARIO', text: 'Sofia Saborido et Dario Da Silva : un dialogue permanent sur la piste. Leur tango est po√©sie, √©motion et technique r√©unies.' },
      'eva-matteo': { title: 'EVA & MATTEO', text: 'Eva Laura Madar et Matteo Antonietti apportent fra√Æcheur et cr√©ativit√© au tango. Du traditionnel au n√©otango, ils explorent tous les styles.' },
      'dj-raffaela': { title: 'DJETTE RAFFAELA', text: 'Raffaela s√©lectionne chaque tanda avec soin. Sa sensibilit√© musicale cr√©e des atmosph√®res uniques qui font danser jusqu\'au bout de la nuit.' }
    };

    // Types de contenu par jour
    // LUN/MER : √âducatif (histoire, vocabulaire, tips)
    // VEN : Teaser artistes
    // SAM : Stories interactives (dans storysData)
    // DIM : Reels/Coulisses

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // CAMPAGNE EMAIL ‚Äî 8 emails strat√©giques
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    const newslettersData = [
      {
        id: 1,
        type: 'LANCEMENT',
        subject: 'Plaza Tango 2026 ‚Äî La 5e √©dition est annonc√©e !',
        preheader: 'Tarif de lancement -20% jusqu\'au 31 janvier. R√©servez vos places.',
        sendDate: '6 janvier 2026',
        audience: 'all',
        audienceLabel: 'Tous (1 250 contacts)',
        image: 'assets/tango1.jpg',
        body: `
          <div class="email-hero"><img src="assets/tango1.jpg" alt="Plaza Tango"></div>

          <p>Cher(e) tanguero/a,</p>
          <p>C'est avec une immense joie que nous vous annon√ßons la <strong>5e √©dition du Festival Plaza Tango</strong> !</p>

          <div class="highlight">
            <strong>24-25-26 avril 2026</strong><br>
            Belfort, France<br>
            2 orchestres live - 8 maestros - 3 milongas
          </div>

          <h2>Ce qui vous attend</h2>
          <ul>
            <li><strong>Sondertango</strong> en concert le samedi soir</li>
            <li><strong>Silbando Orquesta</strong> pour la cl√¥ture</li>
            <li>8 maestros internationaux pour des masterclasses exclusives</li>
            <li>3 milongas pour danser jusqu'au bout de la nuit</li>
          </ul>

          <h2>Tarif de lancement -20%</h2>
          <p>Jusqu'au <strong>31 janvier</strong>, profitez du tarif pr√©f√©rentiel :</p>
          <ul>
            <li>Pass 3 jours : <s>180‚Ç¨</s> <strong>144‚Ç¨</strong></li>
            <li>Pass weekend : <s>120‚Ç¨</s> <strong>96‚Ç¨</strong></li>
          </ul>

          <p style="text-align: center;">
            <a href="#" class="cta-btn">R√âSERVER MON PASS</a>
          </p>

          <p>On a h√¢te de vous retrouver sur la piste !</p>
          <p><strong>L'√©quipe Plaza Tango</strong></p>
        `
      },
      {
        id: 2,
        type: 'MAESTROS',
        subject: 'D√©couvrez les maestros de Plaza Tango 2026',
        preheader: 'Yanina & Neri, Sofia & Dario, Eva & Matteo... La programmation compl√®te.',
        sendDate: '20 janvier 2026',
        audience: 'all',
        audienceLabel: 'Tous (1 250 contacts)',
        image: 'assets/yanina-neri.jpg',
        body: `
          <div class="email-hero"><img src="assets/yanina-neri.jpg" alt="Maestros"></div>

          <p>Cher(e) tanguero/a,</p>
          <p>La programmation des maestros est d√©sormais compl√®te ! Voici les artistes qui vous enseigneront durant le festival :</p>

          <h2>Les Maestros 2026</h2>

          <p><strong>YANINA QUI√ëONES & NERI PILI√ö</strong><br>
          Direct de Buenos Aires. L'√©l√©gance porte√±a incarn√©e. Leur technique et leur musicalit√© sont l√©gendaires.</p>

          <p><strong>SOFIA SABORIDO & DARIO DA SILVA</strong><br>
          Leur tango est un dialogue. Po√©sie, √©motion et technique r√©unies.</p>

          <p><strong>EVA LAURA MADAR & MATTEO ANTONIETTI</strong><br>
          Du traditionnel au n√©otango, ils explorent tous les styles avec brio.</p>

          <p><strong>MARIANNE KUUSIPALO & MAURICIO BORGARELLO</strong><br>
          Duo finlando-argentin. Leur connexion exceptionnelle inspire les danseurs.</p>

          <div class="highlight">
            <strong>Rappel : Tarif de lancement -20% jusqu'au 31 janvier !</strong><br>
            Plus que quelques jours pour en profiter.
          </div>

          <p style="text-align: center;">
            <a href="#" class="cta-btn">R√âSERVER MAINTENANT</a>
          </p>

          <p><strong>L'√©quipe Plaza Tango</strong></p>
        `
      },
      {
        id: 3,
        type: 'URGENCE',
        subject: 'Derni√®res heures : le tarif -20% se termine CE SOIR',
        preheader: 'Minuit = fin du tarif pr√©f√©rentiel. Ne passez pas √† c√¥t√©.',
        sendDate: '31 janvier 2026',
        audience: 'non-registered',
        audienceLabel: 'Non-inscrits (850 contacts)',
        image: 'assets/tango3.jpg',
        body: `
          <div class="email-hero"><img src="assets/tango3.jpg" alt="Plaza Tango"></div>

          <p>Cher(e) tanguero/a,</p>
          <p><strong>C'est votre derni√®re chance !</strong></p>
          <p>Ce soir √† minuit, le tarif de lancement prend fin. Demain, les prix augmentent de 20%.</p>

          <div class="highlight">
            <strong>Jusqu'√† ce soir minuit :</strong><br>
            Pass 3 jours : <s>180‚Ç¨</s> <strong>144‚Ç¨</strong> (√©conomisez 36‚Ç¨)<br>
            Pass weekend : <s>120‚Ç¨</s> <strong>96‚Ç¨</strong> (√©conomisez 24‚Ç¨)
          </div>

          <h2>D√©j√† 150 inscrits !</h2>
          <p>Les danseurs de 8 pays ont d√©j√† r√©serv√© leur place. Ne restez pas sur le bord de la piste.</p>

          <p style="text-align: center;">
            <a href="#" class="cta-btn">J'EN PROFITE MAINTENANT</a>
          </p>

          <p>√Ä tr√®s vite sur la piste,<br>
          <strong>L'√©quipe Plaza Tango</strong></p>
        `
      },
      {
        id: 4,
        type: 'ANCIENS PARTICIPANTS',
        subject: '[Fidelite] Votre place vous attend a Plaza Tango 2026',
        preheader: 'Vous etiez la en 2025. On vous offre -10% supplementaires.',
        sendDate: '10 fevrier 2026',
        audience: 'past-participants',
        audienceLabel: 'Anciens participants (380 contacts)',
        image: 'assets/tango4.jpg',
        body: `
          <div class="email-hero"><img src="assets/tango4.jpg" alt="Plaza Tango"></div>

          <p>Cher(e) tanguero/a,</p>
          <p>Vous faites partie de la <strong>famille Plaza Tango</strong>. Vous etiez la en 2025, et on ne vous oublie pas.</p>

          <h2>Offre Fidelite</h2>
          <p>En tant qu'ancien(ne) participant(e), beneficiez de <strong>-10% supplementaires</strong> sur votre pass :</p>

          <div class="highlight">
            <strong>Votre code promo exclusif :</strong><br>
            <span style="font-size: 24px; font-family: monospace;">FIDELITE2026</span><br><br>
            Pass 3 jours : <strong>162 euros</strong> au lieu de 180 euros<br>
            Pass weekend : <strong>108 euros</strong> au lieu de 120 euros
          </div>

          <h2>Les nouveautes 2026</h2>
          <ul>
            <li>2 orchestres live (Sondertango + Silbando)</li>
            <li>4 couples de maestros internationaux</li>
            <li>Une nouvelle salle plus grande</li>
            <li>Afterparty secrete le samedi soir</li>
          </ul>

          <p style="text-align: center;">
            <a href="#" class="cta-btn">UTILISER MON CODE -10%</a>
          </p>

          <p>Merci pour votre fidelite,<br>
          <strong>L'equipe Plaza Tango</strong></p>
        `
      },
      {
        id: 5,
        type: 'PROGRAMME',
        subject: 'Le programme complet est en ligne !',
        preheader: 'Masterclasses, concerts, milongas... Planifiez votre festival.',
        sendDate: '15 mars 2026',
        audience: 'registered',
        audienceLabel: 'Inscrits (300 contacts)',
        image: 'assets/eva-matteo.jpg',
        body: `
          <div class="email-hero"><img src="assets/eva-matteo.jpg" alt="Programme"></div>

          <p>Cher(e) participant(e),</p>
          <p>Le programme detaille du festival est maintenant disponible !</p>

          <h2>Vendredi 24 avril</h2>
          <ul>
            <li>14h-18h : Masterclasses (3 niveaux)</li>
            <li>19h : Buffet d'accueil</li>
            <li>21h : Milonga d'ouverture - DJ Pablo</li>
          </ul>

          <h2>Samedi 25 avril</h2>
          <ul>
            <li>10h-18h : Masterclasses intensives</li>
            <li>20h : <strong>Concert SONDERTANGO</strong></li>
            <li>22h : Grande Milonga - DJ Georges Galopa</li>
          </ul>

          <h2>Dimanche 26 avril</h2>
          <ul>
            <li>10h-16h : Dernieres masterclasses</li>
            <li>17h : Ronda des Maestros</li>
            <li>19h : <strong>Concert SILBANDO ORQUESTA</strong></li>
            <li>21h : Milonga Despedida - DJette Raffaela</li>
          </ul>

          <div class="highlight">
            <strong>Conseil :</strong> Reservez vos masterclasses des maintenant, les places sont limitees a 30 couples par session.
          </div>

          <p style="text-align: center;">
            <a href="#" class="cta-btn">VOIR LE PROGRAMME DETAILLE</a>
          </p>

          <p>A tres bientot,<br>
          <strong>L'equipe Plaza Tango</strong></p>
        `
      },
      {
        id: 6,
        type: 'LAST CALL',
        subject: 'Dernieres places - 90% vendus !',
        preheader: 'Le festival affiche presque complet. Reservez avant qu\'il soit trop tard.',
        sendDate: '1 avril 2026',
        audience: 'non-registered',
        audienceLabel: 'Non-inscrits (850 contacts)',
        image: 'assets/yanina-neri.jpg',
        body: `
          <div class="email-hero"><img src="assets/yanina-neri.jpg" alt="Last Call"></div>

          <p>Cher(e) tanguero/a,</p>
          <p><strong>Le festival affiche presque complet.</strong></p>

          <div class="highlight">
            <strong>En chiffres :</strong><br>
            - 360 inscrits sur 400 places<br>
            - 14 pays representes<br>
            - Masterclasses niveau avance : COMPLET<br>
            - Il reste 40 places
          </div>

          <h2>Ce que vous allez manquer...</h2>
          <ul>
            <li>Sondertango en live - leur dernier concert en France cette annee</li>
            <li>Yanina & Neri - direct de Buenos Aires</li>
            <li>3 nuits de milonga jusqu'a 4h du matin</li>
            <li>Une communaute de passionnes venus de toute l'Europe</li>
          </ul>

          <p style="text-align: center;">
            <a href="#" class="cta-btn">RESERVER LES DERNIERES PLACES</a>
          </p>

          <p>Ne regrettez pas,<br>
          <strong>L'equipe Plaza Tango</strong></p>
        `
      },
      {
        id: 7,
        type: 'COMPTE A REBOURS',
        subject: 'J-7 : Preparez votre festival !',
        preheader: 'Infos pratiques, planning, conseils... Tout pour etre pret.',
        sendDate: '17 avril 2026',
        audience: 'registered',
        audienceLabel: 'Inscrits (400 contacts)',
        image: 'assets/marianne-mauricio.jpg',
        body: `
          <div class="email-hero"><img src="assets/marianne-mauricio.jpg" alt="J-7"></div>

          <p>Cher(e) participant(e),</p>
          <p><strong>Plus qu'une semaine !</strong> Voici tout ce qu'il faut savoir pour profiter au maximum du festival.</p>

          <h2>Infos pratiques</h2>
          <ul>
            <li><strong>Lieu :</strong> Salle des Fetes de Belfort, 1 Rue de la Republique</li>
            <li><strong>Accueil :</strong> Vendredi 24 avril des 13h</li>
            <li><strong>Parking :</strong> Gratuit sur place (200 places)</li>
          </ul>

          <h2>Hebergement</h2>
          <p>Nos partenaires vous accueillent :</p>
          <ul>
            <li>Hotel Vauban 3 etoiles : -15% avec le code PLAZATANGO</li>
            <li>Ibis Belfort Centre : a 5 min a pied</li>
          </ul>

          <h2>Dress code</h2>
          <ul>
            <li>Vendredi : Elegance decontractee</li>
            <li>Samedi : Tenue de gala (on sort le grand jeu !)</li>
            <li>Dimanche : Milonga style classique</li>
          </ul>

          <div class="highlight">
            <strong>N'oubliez pas :</strong><br>
            - Vos chaussures de danse (+ chaussures de rechange)<br>
            - Votre confirmation de reservation<br>
            - De l'eau pour vous hydrater !
          </div>

          <p style="text-align: center;">
            <a href="#" class="cta-btn">TELECHARGER MON PLANNING</a>
          </p>

          <p>A vendredi !<br>
          <strong>L'equipe Plaza Tango</strong></p>
        `
      },
      {
        id: 8,
        type: 'J-1',
        subject: 'C\'est demain ! Dernieres infos avant le festival',
        preheader: 'Horaires, acces, surprises... On y est presque !',
        sendDate: '23 avril 2026',
        audience: 'registered',
        audienceLabel: 'Inscrits (400 contacts)',
        image: 'assets/sondertango.jpg',
        body: `
          <div class="email-hero"><img src="assets/sondertango.jpg" alt="J-1"></div>

          <p>Cher(e) participant(e),</p>
          <p><strong>DEMAIN C'EST LE GRAND JOUR !</strong></p>

          <h2>Programme de demain</h2>
          <ul>
            <li><strong>13h :</strong> Ouverture des portes & accueil</li>
            <li><strong>14h :</strong> Premiere masterclass</li>
            <li><strong>19h :</strong> Buffet d'accueil</li>
            <li><strong>21h :</strong> Milonga d'ouverture avec DJ Pablo</li>
          </ul>

          <div class="highlight">
            <strong>Surprise !</strong><br>
            Une petite attention vous attend a l'accueil. Soyez parmi les premiers !
          </div>

          <h2>Restez connectes</h2>
          <p>Suivez-nous sur Instagram <strong>@plazatango</strong> pour :</p>
          <ul>
            <li>Les stories en direct</li>
            <li>Les changements de derniere minute</li>
            <li>Les photos du festival</li>
          </ul>

          <h2>Derniere minute</h2>
          <p>Covoiturage ? Rejoignez notre groupe WhatsApp pour trouver des places ou proposer la votre :</p>
          <p style="text-align: center;">
            <a href="#" class="cta-btn">REJOINDRE LE GROUPE WHATSAPP</a>
          </p>

          <p>La magie commence demain,<br>
          <strong>L'equipe Plaza Tango</strong></p>
        `
      }
    ];

    const postsData = [
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 1 : 5-11 JANVIER ‚Äî LANCEMENT
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 1, style: 1, image: 'assets/tango1.jpg', category: 'SAVE THE DATE', title: 'PLAZA<br>TANGO', subtitle: 'La 5e √©dition du festival revient √† Belfort. 24-26 avril 2026.', publishDate: 'Lun 5 jan', dayType: 'lundi', description: 'üéâ C\'est officiel ! Le Festival Plaza Tango revient pour sa 5e √©dition !\n\nüìÖ 24-26 avril 2026\nüìç Belfort, France\n\n3 jours de passion, de danse et de musique argentine.\n\n‚û°Ô∏è Lien en bio pour les early birds !\n\n#PlazaTango #TangoFestival #Belfort #TangoArgentino', phase: 1, artistKey: null },
      { id: 2, style: 2, image: 'assets/tango6.jpg', category: 'LE SAVIEZ-VOUS ?', title: 'ORIGINES<br>DU TANGO', description: 'N√© dans les faubourgs de Buenos Aires √† la fin du XIXe si√®cle, fruit d\'un m√©tissage culturel unique.', publishDate: 'Mer 7 jan', dayType: 'mercredi', contentSlide: ['Le tango na√Æt vers 1880 dans les quartiers populaires de Buenos Aires et Montevideo, sur les rives du Rio de la Plata.', '√Ä cette √©poque, l\'Argentine accueille des millions d\'immigrants europ√©ens, principalement italiens et espagnols, qui se m√™lent aux gauchos et aux descendants d\'esclaves africains.', 'Cette fusion donne naissance au tango : habanera cubaine, candombe africain, musiques italiennes et espagnoles se rencontrent dans les conventillos, ces logements ouvriers surpeupl√©s.', 'D\'abord consid√©r√© comme ind√©cent et dans√© dans les maisons closes, le tango conquiert Paris vers 1910 avant de devenir respectable en Argentine.'], instaDesc: 'üìö HISTOIRE DU TANGO\n\nLe tango est n√© dans les quartiers populaires de Buenos Aires et Montevideo √† la fin du XIXe si√®cle.\n\nM√©lange de cultures : immigrants italiens, espagnols, africains et gauchos argentins.\n\n#TangoHistory #PlazaTango #Culture', phase: 1, artistKey: null },
      { id: 3, style: 5, image: 'assets/sondertango.jpg', cat: 'CONCERT', title: 'SONDER<br>TANGO', desc: 'Concert milonga le samedi soir avec l\'orchestre Sondertango.', publishDate: 'Ven 9 jan', dayType: 'vendredi', description: 'üéµ ANNONCE ARTISTE #1\n\nSONDERTANGO en concert live le samedi 25 avril !\n\nOrchestre de tango argentin r√©put√© pour leur √©nergie sur sc√®ne. Leur musique fait vibrer les milongas du monde entier.\n\nüéüÔ∏è Early bird -20% jusqu\'au 31 janvier !\n\n#Sondertango #TangoOrchestra #LiveMusic #PlazaTango', phase: 1, artistKey: 'sondertango' },
      { id: 4, style: 1, image: 'assets/tango3.jpg', category: 'COULISSES', title: '√âDITION<br>2025', subtitle: 'Retour en images sur la 4e √©dition du festival.', publishDate: 'Dim 11 jan', dayType: 'dimanche', description: 'üì∏ RETOUR EN IMAGES\n\nVous √©tiez plus de 400 √† nous rejoindre en 2025 !\n\nMerci pour ces moments magiques. Cette ann√©e, on voit encore plus grand.\n\nüëâ Swipez pour revivre les meilleurs moments\n\n#PlazaTango #Memories #TangoCommunity', phase: 1, artistKey: null },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 2 : 12-18 JANVIER
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 5, style: 2, image: 'assets/tango1.jpg', category: 'VOCABULAIRE', title: 'L\'ABRAZO', description: 'L\'√©treinte qui connecte deux danseurs. Le coeur du tango argentin.', publishDate: 'Lun 12 jan', dayType: 'lundi', contentSlide: ['L\'abrazo, c\'est l\'√©treinte en espagnol. C\'est le premier contact entre deux danseurs, le moment o√π tout commence.', 'Dans l\'abrazo ouvert, les bras sont plus d√©tendus, laissant de l\'espace entre les partenaires. Id√©al pour les figures complexes et les d√©butants.', 'L\'abrazo ferm√© rapproche les corps, poitrine contre poitrine. La connexion est plus intense, la communication plus subtile.', 'Les vieux milongueros de Buenos Aires le disent : on reconna√Æt un bon danseur √† son abrazo, pas √† ses figures. Un abrazo sinc√®re vaut mille ganchos.'], instaDesc: 'üìö VOCABULAIRE TANGO : L\'ABRAZO\n\nL\'abrazo (l\'√©treinte) est le c≈ìur du tango.\n\nC\'est le premier contact entre les danseurs, il d√©finit le style de danse et c\'est l√† que na√Æt la connexion.\n\n#TangoVocabulary #Abrazo #PlazaTango', phase: 1, artistKey: null },
      { id: 6, style: 5, image: 'assets/silbando.jpg', cat: 'CONCERT', title: 'SILBANDO<br>ORQUESTA', desc: 'Dimanche soir, Silbando Orquesta cl√¥ture le festival.', publishDate: 'Ven 16 jan', dayType: 'vendredi', description: 'üéµ ANNONCE ARTISTE #2\n\nSILBANDO ORQUESTA pour le concert de cl√¥ture !\n\nFormation authentique venue de Buenos Aires. Leur son traditionnel vous transportera dans le Buenos Aires des ann√©es 40.\n\nüéüÔ∏è Early bird -20% jusqu\'au 31 janvier !\n\n#SilbandoOrquesta #TangoMusic #PlazaTango', phase: 1, artistKey: 'silbando' },
      { id: 7, style: 2, image: 'assets/tango4.jpg', category: 'CONSEILS', title: 'BIEN<br>D√âBUTER', description: 'Les conseils essentiels pour commencer le tango du bon pied.', publishDate: 'Mer 14 jan', dayType: 'mercredi', contentSlide: ['Marchez avant de danser. Le tango, c\'est avant tout la marche. Ma√Ætrisez votre caminata et le reste suivra naturellement.', '√âcoutez la musique, vraiment. Le tango se danse SUR la musique, pas √† c√¥t√©. Laissez l\'orchestre guider vos pas.', 'Oubliez les figures compliqu√©es au d√©but. Concentrez-vous sur la connexion avec votre partenaire. Un abrazo sinc√®re impressionne plus qu\'un gancho rat√©.', 'Soyez patient avec vous-m√™me. Le tango s\'apprend toute une vie. Les meilleurs danseurs de Buenos Aires continuent de prendre des cours.', 'Allez en milonga d√®s que possible. C\'est sur la piste qu\'on progresse vraiment, pas seulement en cours.'], instaDesc: 'üí° CONSEILS POUR D√âBUTANTS\n\nMarchez avant de danser. √âcoutez la musique. Connexion avant figures. Patience. Allez en milonga.\n\n#TangoTips #Beginners #PlazaTango', phase: 1, artistKey: null },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 3 : 19-25 JANVIER ‚Äî CONCOURS #1
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 8, style: 1, image: 'assets/tango1.jpg', category: 'CONCOURS', title: 'GAGNEZ<br>VOTRE PASS', subtitle: 'Un pass 3 jours √† gagner ! Participez maintenant.', publishDate: 'Lun 19 jan', dayType: 'lundi', description: 'üéÅ CONCOURS ‚Äî GAGNEZ VOTRE PASS 3 JOURS !\n\nPour participer :\n1Ô∏è‚É£ Suivez @plazatango\n2Ô∏è‚É£ Likez ce post\n3Ô∏è‚É£ Taguez 2 ami(e)s tangueros en commentaire\n4Ô∏è‚É£ Partagez en story (bonus +1 chance)\n\nüìÖ Tirage au sort le 26 janvier\nüí∞ Valeur : 180‚Ç¨\n\nBonne chance ! üçÄ\n\n#Concours #PlazaTango #TangoFestival #Giveaway', phase: 1, artistKey: null, isContest: true },
      { id: 9, style: 2, image: 'assets/tango6.jpg', category: 'VOCABULAIRE', title: 'LA<br>MILONGA', description: 'Un mot, trois sens. Danse, musique et soir√©e √† la fois.', publishDate: 'Mer 21 jan', dayType: 'mercredi', contentSlide: ['La milonga comme danse est la petite s≈ìur espi√®gle du tango. Plus rapide, plus ludique, elle permet de jouer avec le rythme et de s\'amuser sur la piste.', 'La milonga comme musique a un rythme syncop√© caract√©ristique, joyeux et entra√Ænant. On la reconna√Æt imm√©diatement d√®s les premi√®res notes.', 'La milonga comme soir√©e, c\'est l\'√©v√©nement social o√π les tangueros se retrouvent pour danser. C\'est l√† que tout se passe, l√† que naissent les amiti√©s et parfois plus.', 'Au festival Plaza Tango, trois milongas vous attendent : vendredi soir, la grande milonga du samedi, et la milonga de cl√¥ture dimanche.'], instaDesc: 'üìö VOCABULAIRE TANGO : LA MILONGA\n\nLa milonga, c\'est 3 choses : un style de danse plus rapide et ludique, un type de musique au rythme syncop√©, et le lieu o√π l\'on danse le tango.\n\n#Milonga #TangoCulture #PlazaTango', phase: 1, artistKey: null },
      { id: 10, style: 1, image: 'assets/marianne-mauricio.jpg', category: 'MAESTROS', title: 'MARIANNE<br>MAURICIO', subtitle: 'Duo finlando-argentin. Leur complicit√© inspire les danseurs.', publishDate: 'Ven 23 jan', dayType: 'vendredi', description: 'üåü ANNONCE MAESTROS #1\n\nMARIANNE KUUSIPALO & MAURICIO BORGARELLO\n\nDuo finlando-argentin reconnu pour leur connexion exceptionnelle. Leur style √©l√©gant et leur p√©dagogie font d\'eux des maestros tr√®s demand√©s.\n\nüìö 3 masterclasses au programme !\n\n#Maestros #PlazaTango #TangoWorkshop', phase: 1, artistKey: 'marianne-mauricio' },
      { id: 11, style: 5, image: 'assets/tango3.jpg', cat: 'R√âSULTAT', title: 'BRAVO<br>GAGNANT', desc: 'F√©licitations au gagnant du pass 3 jours !', publishDate: 'Dim 25 jan', dayType: 'dimanche', description: 'üéâ R√âSULTAT DU CONCOURS !\n\nF√©licitations √† @[GAGNANT] qui remporte son pass 3 jours !\n\nüôè Merci √† tous pour votre participation ! +500 participants !\n\nüëâ Nouveau concours bient√¥t... Restez connect√©s !\n\n#PlazaTango #Winner #Concours', phase: 1, artistKey: null, isContest: true },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 4 : 26 JAN - 1 F√âV ‚Äî FIN EARLY BIRD
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 12, style: 2, image: 'assets/tango1.jpg', category: 'TECHNIQUE', title: 'LA<br>CAMINATA', description: 'La marche est LA base. Un bon tanguero sait d\'abord marcher.', publishDate: 'Lun 26 jan', dayType: 'lundi', contentSlide: ['La caminata, c\'est la marche en espagnol. C\'est le fondement de tout le tango. Avant de penser aux figures, il faut savoir marcher.', 'Le secret d\'une bonne caminata r√©side dans le transfert de poids. Chaque pas doit √™tre complet, le poids passant enti√®rement d\'un pied √† l\'autre.', 'L\'ancrage au sol est essentiel. Imaginez que vos pieds s\'enfoncent l√©g√®rement dans le parquet √† chaque pas. Cette connexion au sol donne de la stabilit√© et de la pr√©sence.', 'Exercice √† faire chez vous : marchez pieds nus, tr√®s lentement, en sentant chaque centim√®tre du sol sous vos pieds. Cette conscience corporelle transformera votre danse.'], instaDesc: 'üìö TECHNIQUE : LA CAMINATA\n\nLa marche (caminata) est LA base du tango. Avant de faire des figures, apprenez √† marcher avec conscience du poids du corps et connexion au sol.\n\n#TangoTechnique #Caminata #PlazaTango', phase: 1, artistKey: null },
      { id: 13, style: 5, image: 'assets/yanina-neri.jpg', cat: 'MAESTROS', title: 'YANINA<br>NERI', desc: 'Yanina Qui√±ones et Neri Pili√∫, venus de Buenos Aires.', publishDate: 'Ven 30 jan', dayType: 'vendredi', description: 'üåü ANNONCE MAESTROS #2\n\nYANINA QUI√ëONES & NERI PILI√ö\n\nDirect de Buenos Aires ! Ils incarnent l\'√©l√©gance porte√±a. Leur musicalit√© et leur technique impeccable inspirent les danseurs du monde entier.\n\nüìö Masterclasses avanc√©es au programme\n\n#YaninaNeri #BuenosAires #PlazaTango', phase: 2, artistKey: 'yanina-neri' },
      { id: 14, style: 1, image: 'assets/tango1.jpg', category: 'PROMO', title: 'DERNI√àRES<br>HEURES', subtitle: 'Ce soir minuit, les tarifs pr√©f√©rentiels s\'envolent !', publishDate: 'Sam 31 jan', dayType: 'samedi', description: '‚è∞ DERNI√àRES HEURES ‚Äî TARIF LANCEMENT -20% !\n\nüéüÔ∏è Ce soir minuit, les prix augmentent !\n\nPass 3 jours : 144‚Ç¨ au lieu de 180‚Ç¨\nPass weekend : 99‚Ç¨ au lieu de 120‚Ç¨\n\n‚û°Ô∏è Lien en bio\n\nüìä D√©j√† 150 inscrits !\n\n#PlazaTango #Promo #Derni√®resPlaces', phase: 1, artistKey: null },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 5-8 : F√âVRIER ‚Äî MAESTROS & √âDUCATIF
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 15, style: 1, image: 'assets/sofia-dario.jpg', category: 'MAESTROS', title: 'SOFIA<br>DARIO', subtitle: 'Sofia Saborido et Dario Da Silva. Po√©sie et technique.', publishDate: 'Ven 6 f√©v', dayType: 'vendredi', description: 'üåü ANNONCE MAESTROS #3\n\nSOFIA SABORIDO & DARIO DA SILVA\n\nLeur tango est un dialogue. Une conversation entre deux √¢mes. Po√©sie, √©motion et technique r√©unies.\n\nüìö Masterclass "Connexion et Musicalit√©"\n\n#SofiaDario #PlazaTango #TangoMaestros', phase: 2, artistKey: 'sofia-dario' },
      { id: 16, style: 2, image: 'assets/tango4.jpg', category: 'CODES', title: 'LE<br>CABECEO', description: 'L\'art d\'inviter en milonga sans dire un mot. √âl√©gant et respectueux.', publishDate: 'Lun 9 f√©v', dayType: 'lundi', contentSlide: ['Le cabeceo, c\'est l\'art d\'inviter par le regard. Pas besoin de traverser la salle ni de prononcer un mot.', 'Comment √ßa marche ? Vous croisez le regard de quelqu\'un qui vous pla√Æt. Si le regard se maintient, vous faites un l√©ger signe de t√™te. Un sourire en retour signifie oui.', 'Si l\'autre d√©tourne le regard, c\'est un non, et c\'est parfait ainsi. Pas de g√™ne, pas de refus verbal, chacun garde sa dignit√©.', 'R√®gle d\'or : on n\'invite jamais quelqu\'un en allant √† sa table. C\'est consid√©r√© comme impoli et met la personne dans une position inconfortable pour refuser.'], instaDesc: 'üìö CODES DE LA MILONGA : LE CABECEO\n\nComment inviter en milonga ? Par le regard. On croise, on maintient, on fait un signe de t√™te. L\'autre accepte d\'un sourire ou d√©tourne les yeux.\n\n#Cabeceo #MilongaCodes #PlazaTango', phase: 2, artistKey: null },
      { id: 17, style: 5, image: 'assets/eva-matteo.jpg', cat: 'MAESTROS', title: 'EVA<br>MATTEO', desc: 'Eva Laura Madar et Matteo Antonietti. √ânergie et cr√©ativit√©.', publishDate: 'Ven 13 f√©v', dayType: 'vendredi', description: 'üåü ANNONCE MAESTROS #4\n\nEVA LAURA MADAR & MATTEO ANTONIETTI\n\nIls apportent fra√Æcheur et cr√©ativit√© au tango. Du traditionnel au n√©otango, ils explorent tous les styles avec brio.\n\nüìö Masterclass "Dynamiques et Musicalit√©"\n\n#EvaMatteo #PlazaTango #NeoTango', phase: 2, artistKey: 'eva-matteo' },
      { id: 18, style: 2, image: 'assets/tango6.jpg', category: 'CODES', title: 'LA<br>TANDA', description: 'Une tanda = 3-4 morceaux avec le m√™me partenaire. Ne partez pas avant !', publishDate: 'Lun 16 f√©v', dayType: 'lundi', contentSlide: ['La tanda, c\'est une s√©rie de 3 ou 4 morceaux du m√™me orchestre, du m√™me style. C\'est l\'unit√© de base de la soir√©e en milonga.', 'Quand vous acceptez une invitation, vous vous engagez pour toute la tanda. C\'est une sorte de contrat implicite entre les danseurs.', 'Entre chaque tanda, le DJ passe une cortina : une courte musique non dansable qui marque la pause. C\'est le moment de remercier votre partenaire et de rejoindre votre place.', 'Quitter quelqu\'un avant la fin de la tanda est tr√®s mal vu. Cela signifie clairement que vous n\'avez pas appr√©ci√© danser avec cette personne. √Ä √©viter absolument !'], instaDesc: 'üìö CODES DE LA MILONGA : LA TANDA\n\nUne tanda = 3-4 morceaux du m√™me style. On danse toute la tanda ensemble. La cortina = fin de la tanda, on change de partenaire.\n\n#Tanda #Cortina #MilongaCodes #PlazaTango', phase: 2, artistKey: null },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 9-10 : MARS ‚Äî CONCOURS #2 + DJs
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 19, style: 1, image: 'assets/tango3.jpg', category: 'CONCOURS', title: 'PHOTO<br>TANGO', subtitle: 'Partagez votre plus belle photo de tango !', publishDate: 'Lun 2 mars', dayType: 'lundi', description: 'üì∏ CONCOURS PHOTO ‚Äî GAGNEZ UNE MASTERCLASS PRIV√âE !\n\nPartagez votre plus belle photo de tango !\n\n1Ô∏è‚É£ Postez votre photo avec #PlazaTangoContest\n2Ô∏è‚É£ Mentionnez @plazatango\n3Ô∏è‚É£ Racontez l\'histoire de cette photo\n\nüèÜ Prix : 1h de cours priv√© avec un maestro du festival (valeur 150‚Ç¨)\n\nüìÖ Fin : 15 mars\n\n#PhotoContest #PlazaTango #TangoPhoto', phase: 2, artistKey: null, isContest: true },
      { id: 20, style: 2, image: 'assets/tango1.jpg', category: 'MUSIQUE', title: 'LES<br>ORCHESTRES', description: 'Les 4 grands orchestres √† conna√Ætre pour comprendre le tango.', publishDate: 'Mer 4 mars', dayType: 'mercredi', contentSlide: ['Juan D\'Arienzo, surnomm√© ¬´ El Rey del Comp√°s ¬ª (le roi du rythme). Son style nerveux et √©nergique fait bouger les pieds m√™me des plus r√©ticents. Parfait pour se mettre en jambes !', 'Carlos Di Sarli repr√©sente l\'√©l√©gance pure. Ses m√©lodies limpides et son orchestre raffin√© en font le choix id√©al pour les d√©butants qui veulent comprendre la structure du tango.', 'Osvaldo Pugliese, c\'est le drame √† l\'√©tat pur. Ses rubatos (ralentissements expressifs) demandent de l\'exp√©rience, mais quelle √©motion quand on sait les danser !', 'An√≠bal Troilo, dit ¬´ Pichuco ¬ª, c\'est l\'√©quilibre parfait entre rythme et m√©lodie. Po√©tique, accessible, il pla√Æt √† tous. Si vous ne connaissez qu\'un orchestre, que ce soit celui-l√†.'], instaDesc: 'üìö MUSIQUE : LES GRANDS ORCHESTRES\n\nD\'Arienzo : rythmique et √©nergique. Di Sarli : √©l√©gant, parfait pour d√©buter. Pugliese : dramatique. Troilo : √©quilibr√© et po√©tique.\n\n#TangoMusic #Orchestras #PlazaTango', phase: 2, artistKey: null },
      { id: 21, style: 2, image: 'assets/tango4.jpg', title: 'DJ<br>PABLO', description: 'DJ Pablo ouvre le festival vendredi soir.', publishDate: 'Ven 6 mars', dayType: 'vendredi', instaDesc: 'üéß ANNONCE DJ #1\n\nDJ PABLO ouvre le festival le vendredi 24 avril !\n\nSes tandas traditionnelles vous feront voyager dans le temps. √ânergie et √©motion au rendez-vous.\n\n#DJPablo #PlazaTango #MilongaMusic', phase: 3, artistKey: null },
      { id: 22, style: 5, image: 'assets/dj-raffaela.jpg', cat: 'DJ', title: 'DJETTE<br>RAFFAELA', desc: 'Raffaela cl√¥ture le festival dimanche soir.', publishDate: 'Ven 13 mars', dayType: 'vendredi', description: 'üéß ANNONCE DJ #2\n\nDJETTE RAFFAELA pour la milonga de cl√¥ture !\n\nSa sensibilit√© musicale cr√©e des atmosph√®res uniques. Les derni√®res tandas seront inoubliables.\n\n#DJRaffaela #Despedida #PlazaTango', phase: 3, artistKey: 'dj-raffaela' },
      { id: 23, style: 1, image: 'assets/tango6.jpg', category: 'R√âSULTAT', title: 'BRAVO<br>GAGNANT', subtitle: 'R√©sultat du concours photo !', publishDate: 'Dim 15 mars', dayType: 'dimanche', description: 'üì∏ R√âSULTAT CONCOURS PHOTO !\n\nF√©licitations √† @[GAGNANT] pour cette magnifique photo !\n\nüèÜ Il/Elle remporte 1h de masterclass priv√©e avec nos maestros !\n\nüôè Merci aux 80+ participants ! Vos photos √©taient superbes.\n\n#PlazaTangoContest #Winner #TangoPhoto', phase: 2, artistKey: null, isContest: true },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 11-14 : MARS-AVRIL ‚Äî PROGRAMME + COUNTDOWN
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 24, style: 2, image: 'assets/eva-matteo.jpg', title: 'PROGRAMME<br>COMPLET', description: 'Trois jours, deux lieux, des dizaines d\'√©v√©nements.', publishDate: 'Lun 23 mars', dayType: 'lundi', instaDesc: 'üìã LE PROGRAMME EST EN LIGNE !\n\nüóìÔ∏è Vendredi 24 : Masterclasses + Milonga d\'ouverture\nüóìÔ∏è Samedi 25 : Masterclasses + Concert Sondertango + Grande Milonga\nüóìÔ∏è Dimanche 26 : Masterclasses + Concert Silbando + Despedida\n\n‚û°Ô∏è Programme d√©taill√© en lien bio\n\nüìä 250 inscrits !\n\n#Programme #PlazaTango #Festival', phase: 4, artistKey: null },
      { id: 25, style: 1, image: 'assets/sondertango.jpg', category: 'MILONGA', title: 'SAMEDI<br>SOIR', subtitle: 'Concert Sondertango puis milonga jusqu\'au bout de la nuit.', publishDate: 'Ven 27 mars', dayType: 'vendredi', description: 'üåô LA GRANDE SOIR√âE DU SAMEDI\n\nüéµ 20h : Concert live SONDERTANGO\nüíÉ 22h : Milonga avec DJ Georges Galopa\nüåÖ Jusqu\'√† 4h du matin !\n\n‚ú® LE moment fort du festival\n\nüìä 300 inscrits, derni√®res places !\n\n#SaturdayNight #PlazaTango #Sondertango', phase: 3, artistKey: 'sondertango' },
      { id: 26, style: 1, image: 'assets/yanina-neri.jpg', category: 'SPECTACLE', title: 'RONDA<br>MAESTROS', subtitle: 'Les maestros du festival dansent pour vous.', publishDate: 'Ven 3 avr', dayType: 'vendredi', description: '‚ú® RONDA DES MAESTROS\n\nDimanche 26 avril, 19h\n\nTous les maestros du festival dansent ensemble pour vous !\n\nYanina & Neri, Sofia & Dario, Eva & Matteo, Marianne & Mauricio\n\nüé≠ Un moment magique √† ne pas manquer\n\n#RondaMaestros #PlazaTango #Spectacle', phase: 3, artistKey: 'yanina-neri' },
      { id: 27, style: 5, image: 'assets/sofia-dario.jpg', cat: 'COUNTDOWN', title: 'J-14', desc: 'Plus que 2 semaines avant le festival !', publishDate: 'Ven 10 avr', dayType: 'vendredi', description: '‚è∞ J-14 !\n\nüìä 350 danseurs inscrits de 12 pays !\n\nüá´üá∑üá©üá™üá®üá≠üáßüá™üáÆüáπüá™üá∏üá≥üá±üá¨üáßüá¶üá∑üá∫üá∏üáØüáµüá∞üá∑\n\n‚ö†Ô∏è Derni√®res places disponibles !\n\n‚û°Ô∏è Lien en bio\n\n#J14 #PlazaTango #Countdown', phase: 4, artistKey: null },
      { id: 28, style: 1, image: 'assets/marianne-mauricio.jpg', category: 'COUNTDOWN', title: 'J-7', subtitle: 'Une semaine ! Les maestros pr√©parent leurs valises.', publishDate: 'Ven 17 avr', dayType: 'vendredi', description: '‚úàÔ∏è J-7 ‚Äî LES MAESTROS ARRIVENT !\n\nMarianne et Mauricio sont pr√™ts !\nYanina et Neri bouclent leurs valises √† Buenos Aires\n\nüìä 380 inscrits ‚Äî PRESQUE COMPLET !\n\n‚ö†Ô∏è Derni√®res places !\n\n#J7 #PlazaTango #Countdown', phase: 4, artistKey: 'marianne-mauricio' },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // SEMAINE 16 : COUNTDOWN FINAL
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 29, style: 5, image: 'assets/tango1.jpg', cat: 'COUNTDOWN', title: 'J-3', desc: 'Plus que quelques jours ! Pr√©parez vos tenues.', publishDate: 'Mar 21 avr', dayType: 'mardi', description: 'üëó J-3 ‚Äî PR√âPAREZ VOS TENUES !\n\nüé≠ Vendredi : √âl√©gance d√©contract√©e\n‚ú® Samedi : Tenue de gala\nüíÉ Dimanche : Milonga style\n\nüìç Salle des F√™tes de Belfort\nüïê Ouverture des portes 14h\n\n#J3 #PlazaTango #TangoFashion', phase: 4, artistKey: null },
      { id: 30, style: 1, image: 'assets/eva-matteo.jpg', category: 'COUNTDOWN', title: 'J-2', subtitle: 'Les maestros sont √† Belfort !', publishDate: 'Mer 22 avr', dayType: 'mercredi', description: 'üõ¨ J-2 ‚Äî ILS SONT L√Ä !\n\nLes premiers maestros sont arriv√©s √† Belfort !\n\nüéí Derniers pr√©paratifs en cours\nüéµ Les musiciens r√©p√®tent\nüíê La salle est presque pr√™te\n\n‚è∞ Rendez-vous vendredi 14h !\n\n#J2 #PlazaTango #Excitement', phase: 4, artistKey: 'eva-matteo' },
      { id: 31, style: 5, image: 'assets/yanina-neri.jpg', cat: 'COUNTDOWN', title: 'J-1', desc: 'Demain, le festival commence !', publishDate: 'Jeu 23 avr', dayType: 'jeudi', description: 'üî• J-1 ‚Äî DEMAIN C\'EST LE GRAND JOUR !\n\nüìä 400 danseurs de 15 pays !\nüéµ 2 orchestres live\nüë®‚Äçüè´ 8 maestros\nüéß 4 DJs\nüíÉ 3 milongas\n\n‚ú® La magie commence demain !\n\n√Ä demain ! üíõ\n\n#J1 #PlazaTango #Ready', phase: 4, artistKey: 'yanina-neri' },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // PHASE 5 : FESTIVAL EN DIRECT
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 32, style: 1, image: 'assets/tango1.jpg', category: 'C\'EST PARTI', title: 'JOUR 1', subtitle: 'Le festival est officiellement ouvert !', publishDate: 'Ven 24 avr', dayType: 'vendredi', description: 'üéâ C\'EST PARTI !\n\nLe Festival Plaza Tango 2026 est officiellement ouvert !\n\nüìç En direct de Belfort\nüíÉ Les premi√®res masterclasses commencent\n\n‚û°Ô∏è Suivez-nous en stories pour vivre le festival en direct !\n\n#PlazaTango2026 #Day1 #Live', phase: 5, artistKey: null },
      { id: 33, style: 5, image: 'assets/sondertango.jpg', cat: 'LIVE', title: 'SONDER<br>TANGO', desc: 'L\'orchestre enflamme la salle !', publishDate: 'Sam 25 avr', dayType: 'samedi', description: 'üî• SONDERTANGO EN LIVE !\n\nL\'orchestre enflamme la salle des f√™tes !\n\nüéµ √ânergie incroyable\nüíÉ 400 danseurs sur la piste\n‚ú® Moment magique\n\n#Sondertango #LiveMusic #PlazaTango2026', phase: 5, artistKey: 'sondertango' },
      { id: 34, style: 1, image: 'assets/silbando.jpg', category: 'CL√îTURE', title: 'SILBANDO<br>LIVE', subtitle: 'Concert de cl√¥ture. √âmotion garantie.', publishDate: 'Dim 26 avr', dayType: 'dimanche', description: 'üéµ SILBANDO ORQUESTA ‚Äî CONCERT DE CL√îTURE\n\nDes frissons dans toute la salle...\n\nMerci pour ces trois jours magiques !\n\nüíõ Plaza Tango 2026, une √©dition inoubliable\n\n#SilbandoOrquesta #Closing #PlazaTango2026', phase: 5, artistKey: 'silbando' },

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // PHASE 6 : APR√àS FESTIVAL
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      { id: 35, style: 5, image: 'assets/tango1.jpg', cat: 'MERCI', title: 'GRACIAS', desc: 'Merci √† tous. Rendez-vous l\'ann√©e prochaine !', publishDate: 'Lun 27 avr', dayType: 'lundi', description: 'üôè GRACIAS !\n\nüíõ 400 danseurs\nüåç 15 pays repr√©sent√©s\nüéµ 2 concerts inoubliables\nüë®‚Äçüè´ 8 maestros exceptionnels\nüíÉ Des milliers de tandas\n\nMerci d\'avoir fait de cette 5e √©dition un moment magique !\n\n‚û°Ô∏è Vid√©o r√©cap √† venir...\n\n#Gracias #PlazaTango2026 #Memories', phase: 6, artistKey: null },
      { id: 36, style: 1, image: 'assets/tango3.jpg', category: 'SAVE THE DATE', title: 'PLAZA<br>TANGO', subtitle: '6e √©dition en 2027. Inscrivez-vous √† la newsletter !', publishDate: 'Ven 1 mai', dayType: 'vendredi', description: 'üìÖ SAVE THE DATE !\n\nPlaza Tango revient en 2027 !\n\n‚û°Ô∏è Inscrivez-vous √† la newsletter pour √™tre inform√© en avant-premi√®re :\nfestival.plazatango.com\n\nüíõ √Ä l\'ann√©e prochaine !\n\n#SaveTheDate #PlazaTango2027 #Newsletter', phase: 6, artistKey: null }
    ];

    // Storys = m√™mes donn√©es avec id + 100
    const storysData = postsData.map(p => ({ ...p, id: p.id + 100, isStory: true }));

    // State
    let currentTab = 'posts';
    let currentPostId = null;
    let currentSlide = 0;
    const publishedPosts = JSON.parse(localStorage.getItem('plazaTangoPublished') || '{}');
    const customImages = JSON.parse(localStorage.getItem('plazaTangoImages') || '{}');

    // Get image for post (custom or default)
    function getPostImage(id) {
      return customImages[id] || postsData.find(p => p.id === id % 100)?.image || 'assets/tango1.jpg';
    }

    function generatePostHTML(data, isStory = false) {
      const storyClass = isStory ? ' story' : '';
      const image = customImages[data.id] || data.image;

      const shapesHTML = `
        <div class="bg-shapes">
          <div class="bg-shape bg-shape-1"></div>
          <div class="bg-shape bg-shape-2"></div>
          <div class="bg-shape bg-shape-3"></div>
        </div>
      `;

      const swipeUpHTML = isStory ? `
        <div class="swipe-up">
          <div class="swipe-arrow"><svg viewBox="0 0 24 24" fill="none"><polyline points="18 15 12 9 6 15"/></svg></div>
          <div class="swipe-text">En savoir plus</div>
        </div>
      ` : '';

      if (data.style === 1) {
        return `
          <div class="post style-1${storyClass}">
            <div class="bg-photo"><img src="${image}" alt=""></div>
            <div class="overlay"></div>
            ${shapesHTML}
            <div class="content">
              <div class="top-bar">
                <div class="brand">
                  <div class="brand-logo"><img src="logo.png" alt=""></div>
                  <div class="brand-text">
                    <div class="brand-name">FESTIVAL PLAZA TANGO</div>
                    <div class="brand-edition">5E √âDITION</div>
                  </div>
                </div>
                <div class="date-pill">24-25-26 AVRIL 2026</div>
              </div>
              <div class="main-content">
                <div class="category">${data.category}</div>
                <div class="title">${data.title}</div>
                <div class="subtitle">${data.subtitle}</div>
              </div>
              <div class="bottom-bar">
                <div class="location">BELFORT ¬∑ FRANCE</div>
                <div class="website-box">
                  <div class="website-logo"><img src="logo.png" alt=""></div>
                  <div class="website">festival.plazatango.com</div>
                </div>
              </div>
            </div>
            ${swipeUpHTML}
          </div>
        `;
      } else if (data.style === 2) {
        return `
          <div class="post style-2${storyClass}">
            ${shapesHTML}
            <div class="photo-half">
              <img src="${image}" alt="">
              <div class="photo-overlay"></div>
            </div>
            <div class="content-half">
              <div class="brand-header">
                <div class="brand-logo"><img src="logo.png" alt=""></div>
                <div class="brand-info">
                  <div class="festival-name">FESTIVAL PLAZA TANGO</div>
                  <div class="festival-edition">5E √âDITION</div>
                </div>
              </div>
              <div class="event-cat">${data.category || 'LE SAVIEZ-VOUS ?'}</div>
              <div class="event-title">${data.title}</div>
              <div class="accent-line"></div>
              <div class="description">${data.description}</div>
              <div class="date-badge">24-25-26 AVRIL 2026 ¬∑ BELFORT</div>
            </div>
            <div class="footer-info">
              <div class="footer-location">BELFORT ¬∑ FRANCE</div>
              <div class="footer-site">
                <div class="footer-logo"><img src="logo.png" alt=""></div>
                <div class="footer-url">festival.plazatango.com</div>
              </div>
            </div>
          </div>
        `;
      } else {
        return `
          <div class="post style-5${storyClass}">
            <div class="bg"><img src="${image}" alt=""></div>
            <div class="gradient"></div>
            ${shapesHTML}
            <div class="header">
              <div class="brand-block">
                <div class="brand-logo"><img src="logo.png" alt=""></div>
                <div class="brand-text">
                  <div class="brand-title">FESTIVAL PLAZA TANGO</div>
                  <div class="brand-edition">5E √âDITION</div>
                </div>
              </div>
              <div class="pill">24-25-26 AVRIL 2026</div>
            </div>
            <div class="content">
              <div class="main">
                <div class="cat">${data.cat}</div>
                <div class="big-title">${data.title}</div>
                <div class="desc">${data.desc}</div>
              </div>
            </div>
            <div class="footer-box">
              <div class="footer-location">BELFORT ¬∑ FRANCE</div>
              <div class="footer-site">
                <div class="footer-logo"><img src="logo.png" alt=""></div>
                <div class="footer-url">festival.plazatango.com</div>
              </div>
            </div>
            ${swipeUpHTML}
          </div>
        `;
      }
    }

    function generateCitationSlide(data) {
      const citation = tangoCitations[Math.floor(Math.random() * tangoCitations.length)];

      // Si c'est un artiste, on utilise le texte de l'artiste
      if (data.artistKey && artistTexts[data.artistKey]) {
        const artist = artistTexts[data.artistKey];
        return `
          <div class="slide-citation">
            <div class="bg-shapes">
              <div class="bg-shape bg-shape-1"></div>
              <div class="bg-shape bg-shape-2"></div>
            </div>
            <div class="citation-content">
              <div class="citation-text" style="font-size: 42px;">${artist.text}</div>
              <div class="citation-author">${artist.title}</div>
            </div>
            <div class="citation-footer">
              <div class="citation-brand">
                <div class="citation-logo"><img src="logo.png" alt=""></div>
                <div class="citation-brand-text">FESTIVAL PLAZA TANGO</div>
              </div>
              <div class="citation-url">festival.plazatango.com</div>
            </div>
          </div>
        `;
      }

      return `
        <div class="slide-citation">
          <div class="bg-shapes">
            <div class="bg-shape bg-shape-1"></div>
            <div class="bg-shape bg-shape-2"></div>
          </div>
          <div class="citation-content">
            <div class="citation-icon">‚ùù</div>
            <div class="citation-text">${citation.text}</div>
            <div class="citation-author">‚Äî ${citation.author}</div>
          </div>
          <div class="citation-footer">
            <div class="citation-brand">
              <div class="citation-logo"><img src="logo.png" alt=""></div>
              <div class="citation-brand-text">FESTIVAL PLAZA TANGO</div>
            </div>
            <div class="citation-url">festival.plazatango.com</div>
          </div>
        </div>
      `;
    }

    function generateCTASlide() {
      return `
        <div class="slide-citation slide-cta">
          <div class="bg-shapes">
            <div class="bg-shape bg-shape-1"></div>
            <div class="bg-shape bg-shape-2"></div>
          </div>
          <div class="cta-content">
            <div class="cta-icon">üéüÔ∏è</div>
            <div class="cta-title">R√âSERVEZ<br>VOS PLACES</div>
            <div class="cta-subtitle">5e √©dition ¬∑ 24-26 avril 2026</div>
            <div class="cta-features">
              <div class="cta-feature">‚úì Masterclasses avec maestros internationaux</div>
              <div class="cta-feature">‚úì Concerts live Sondertango & Silbando</div>
              <div class="cta-feature">‚úì 3 milongas + spectacles</div>
            </div>
            <div class="cta-button">
              <span>BILLETTERIE</span>
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
            </div>
            <div class="cta-url">festival.plazatango.com</div>
          </div>
          <div class="citation-footer">
            <div class="citation-brand">
              <div class="citation-logo"><img src="logo.png" alt=""></div>
              <div class="citation-brand-text">FESTIVAL PLAZA TANGO</div>
            </div>
            <div class="cta-social">
              <span>@plazatango</span>
            </div>
          </div>
        </div>
      `;
    }

    function generateContentSlide(data) {
      if (!data.contentSlide || data.contentSlide.length === 0) return '';

      const category = data.category || 'LE SAVIEZ-VOUS ?';
      const titleText = (data.title || '').replace(/<br>/g, ' ');

      return `
        <div class="slide-citation slide-content">
          <div class="bg-shapes">
            <div class="bg-shape bg-shape-1"></div>
            <div class="bg-shape bg-shape-2"></div>
          </div>
          <div class="content-slide-body">
            <div class="content-slide-header">
              <div class="content-slide-cat">${category}</div>
              <div class="content-slide-title">${titleText}</div>
            </div>
            <div class="content-slide-list">
              ${data.contentSlide.map(item => `
                <div class="content-slide-item">
                  <div class="content-slide-bullet"></div>
                  <div class="content-slide-text">${item}</div>
                </div>
              `).join('')}
            </div>
          </div>
          <div class="citation-footer">
            <div class="citation-brand">
              <div class="citation-logo"><img src="logo.png" alt=""></div>
              <div class="citation-brand-text">FESTIVAL PLAZA TANGO</div>
            </div>
            <div class="citation-url">festival.plazatango.com</div>
          </div>
        </div>
      `;
    }

    function renderGrid() {
      const grid = document.getElementById('posts-grid');

      // Si tab newsletter
      if (currentTab === 'newsletter') {
        renderNewsletterGrid();
        return;
      }

      // Si tab KPI
      if (currentTab === 'kpi') {
        renderKPIDashboard();
        return;
      }

      const data = currentTab === 'posts' ? postsData : storysData;
      const isStory = currentTab === 'storys';

      grid.className = isStory ? 'posts-grid storys-grid' : 'posts-grid';
      grid.innerHTML = '';

      const dayFilter = document.getElementById('day-filter').value;
      const phaseFilter = document.getElementById('phase-filter').value;
      const statusFilter = document.getElementById('status-filter').value;

      const filteredData = data.filter(p => {
        // Filtre par jour
        if (dayFilter === 'concours' && !p.isContest) return false;
        if (dayFilter !== 'all' && dayFilter !== 'concours' && p.dayType !== dayFilter) return false;
        // Filtre par phase
        if (phaseFilter !== 'all' && p.phase !== parseInt(phaseFilter)) return false;
        // Filtre par statut
        const isPublished = publishedPosts[p.id] || false;
        if (statusFilter === 'published' && !isPublished) return false;
        if (statusFilter === 'pending' && isPublished) return false;
        return true;
      });

      filteredData.forEach(post => {
        const isPublished = publishedPosts[post.id] || false;
        const titleText = (post.title || '').replace(/<br>/g, ' ');
        // Posts : visuel + CTA = 2, +1 si contentSlide, +1 si artiste
        let slideCount = isStory ? 1 : 2;
        if (!isStory) {
          if (post.contentSlide && post.contentSlide.length > 0) slideCount++;
          if (post.artistKey) slideCount++;
        }

        const card = document.createElement('div');
        card.className = 'post-card' + (isPublished ? ' published' : '');
        card.innerHTML = `
          <div class="post-preview${isStory ? ' story-preview' : ''}">
            <div class="post-inner${isStory ? ' story-inner' : ''}" id="thumb-${post.id}">
              ${generatePostHTML(post, isStory)}
            </div>
          </div>
          <div class="post-info">
            <div class="post-date">${post.publishDate}</div>
            <div class="post-title-text">${titleText}</div>
            <div class="post-meta">
              <div class="post-status-badge">
                <div class="status-dot${isPublished ? ' published' : ''}"></div>
                <span>${isPublished ? 'Publi√©' : '√Ä publier'}</span>
              </div>
              ${!isStory ? `<div class="post-slides">
                ${Array(slideCount).fill('<div class="slide-dot filled"></div>').join('')}
              </div>` : ''}
            </div>
          </div>
        `;
        card.onclick = () => openModal(post.id);
        grid.appendChild(card);
      });

      requestAnimationFrame(applyThumbnailScale);
      updateStats();
    }

    function applyThumbnailScale() {
      document.querySelectorAll('.post-card').forEach(card => {
        const preview = card.querySelector('.post-preview');
        const inner = card.querySelector('.post-inner');
        if (preview && inner) {
          const scale = preview.offsetWidth / 1080;
          inner.style.transform = `scale(${scale})`;
        }
      });
    }

    function updateStats() {
      const allData = [...postsData, ...storysData];
      const published = Object.keys(publishedPosts).filter(k => publishedPosts[k]).length;
      document.getElementById('stat-total').textContent = allData.length + newslettersData.length;
      document.getElementById('stat-published').textContent = published;
      document.getElementById('stat-remaining').textContent = allData.length - published;
      document.getElementById('posts-count').textContent = postsData.length;
      document.getElementById('storys-count').textContent = storysData.length;
      document.getElementById('newsletter-count').textContent = newslettersData.length;
    }

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // KPI FUNCTIONS
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const kpiWeeks = [
      { week: 'S1', date: '06/01/2026', highlight: true, note: 'Lancement officiel' },
      { week: 'S2', date: '13/01/2026', highlight: false, note: '' },
      { week: 'S3', date: '20/01/2026', highlight: true, note: 'Concours pass 3 jours' },
      { week: 'S4', date: '27/01/2026', highlight: true, note: 'Fin early bird 31/01' },
      { week: 'S5', date: '03/02/2026', highlight: false, note: '' },
      { week: 'S6', date: '10/02/2026', highlight: false, note: '' },
      { week: 'S7', date: '17/02/2026', highlight: false, note: '' },
      { week: 'S8', date: '24/02/2026', highlight: false, note: '' },
      { week: 'S9', date: '03/03/2026', highlight: true, note: 'Concours photo' },
      { week: 'S10', date: '10/03/2026', highlight: false, note: '' },
      { week: 'S11', date: '17/03/2026', highlight: false, note: '' },
      { week: 'S12', date: '24/03/2026', highlight: false, note: '' },
      { week: 'S13', date: '31/03/2026', highlight: false, note: '' },
      { week: 'S14', date: '07/04/2026', highlight: false, note: '' },
      { week: 'S15', date: '14/04/2026', highlight: true, note: 'J-7' },
      { week: 'S16', date: '21/04/2026', highlight: true, note: 'Festival 24-26 avril' }
    ];

    let kpiData = JSON.parse(localStorage.getItem('plazaTangoKPI') || '{}');

    function saveKPI(week, field, value) {
      if (!kpiData[week]) kpiData[week] = {};
      kpiData[week][field] = value;
      localStorage.setItem('plazaTangoKPI', JSON.stringify(kpiData));
      updateKPISummary();
    }

    function getKPI(week, field) {
      return kpiData[week]?.[field] || '';
    }

    function updateKPISummary() {
      const weeks = Object.keys(kpiData);

      // Calculer les totaux (cumules = derniere valeur remplie)
      let lastAbonnes = 0;
      let lastInscrits = 0;
      let lastCA = 0;

      kpiWeeks.forEach(w => {
        const d = kpiData[w.week] || {};
        if (d.abonnes) lastAbonnes = parseInt(d.abonnes) || lastAbonnes;
        if (d.inscrits) lastInscrits = parseInt(d.inscrits) || lastInscrits;
        if (d.ca) lastCA = parseInt(d.ca) || lastCA;
      });

      const abonnesEl = document.getElementById('kpi-total-abonnes');
      const inscritsEl = document.getElementById('kpi-total-inscrits');
      const caEl = document.getElementById('kpi-total-ca');

      if (abonnesEl) abonnesEl.textContent = lastAbonnes || '0';
      if (inscritsEl) inscritsEl.textContent = lastInscrits || '0';
      if (caEl) caEl.textContent = lastCA ? lastCA.toLocaleString() + ' EUR' : '0 EUR';

      // Dessiner le graphique
      renderChart();
    }

    function renderChart() {
      const chart = document.getElementById('kpi-chart');
      if (!chart) return;

      // Trouver les max pour l'echelle
      let maxAbonnes = 0;
      let maxInscrits = 0;

      kpiWeeks.forEach(w => {
        const d = kpiData[w.week] || {};
        const abonnes = parseInt(d.abonnes) || 0;
        const inscrits = parseInt(d.inscrits) || 0;
        if (abonnes > maxAbonnes) maxAbonnes = abonnes;
        if (inscrits > maxInscrits) maxInscrits = inscrits;
      });

      // Si pas de donnees, mettre des valeurs par defaut
      if (maxAbonnes === 0) maxAbonnes = 100;
      if (maxInscrits === 0) maxInscrits = 100;

      chart.innerHTML = kpiWeeks.map(w => {
        const d = kpiData[w.week] || {};
        const abonnes = parseInt(d.abonnes) || 0;
        const inscrits = parseInt(d.inscrits) || 0;

        const abonnesHeight = maxAbonnes > 0 ? (abonnes / maxAbonnes * 140) : 0;
        const inscritsHeight = maxInscrits > 0 ? (inscrits / maxInscrits * 140) : 0;

        return `
          <div class="chart-bar-group">
            <div class="chart-bars">
              <div class="chart-bar abonnes" style="height: ${abonnesHeight}px;" title="Abonnes: ${abonnes}"></div>
              <div class="chart-bar inscrits" style="height: ${inscritsHeight}px;" title="Inscrits: ${inscrits}"></div>
            </div>
            <div class="chart-label">${w.week}</div>
          </div>
        `;
      }).join('');
    }

    function renderKPIDashboard() {
      const grid = document.getElementById('posts-grid');
      grid.className = '';
      document.querySelector('.filter-bar').style.display = 'none';

      grid.innerHTML = `
        <div class="kpi-dashboard">
          <div class="kpi-header">
            <div class="kpi-title">Tableau de bord KPI</div>
            <div class="kpi-actions">
              <button class="btn btn-secondary" onclick="exportKPI()">Exporter CSV</button>
            </div>
          </div>

          <div class="kpi-summary">
            <div class="kpi-card">
              <div class="kpi-card-label">Abonnes Instagram</div>
              <div class="kpi-card-value" id="kpi-total-abonnes">0</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-card-label">Inscrits Festival</div>
              <div class="kpi-card-value" id="kpi-total-inscrits">0</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-card-label">CA Cumule</div>
              <div class="kpi-card-value" id="kpi-total-ca">0 EUR</div>
            </div>
          </div>

          <div class="kpi-chart-container">
            <div class="kpi-chart-title">Progression</div>
            <div class="kpi-chart" id="kpi-chart"></div>
            <div class="kpi-chart-legend">
              <div class="legend-item"><span class="legend-color" style="background: #C9A96E;"></span> Abonnes IG</div>
              <div class="legend-item"><span class="legend-color" style="background: #4ade80;"></span> Inscrits</div>
            </div>
          </div>

          <div class="kpi-table-container">
            <table class="kpi-table">
              <thead>
                <tr>
                  <th>Semaine</th>
                  <th>Abonnes IG</th>
                  <th>Inscrits</th>
                  <th>CA cumule</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody>
                ${kpiWeeks.map(w => `
                  <tr class="${w.highlight ? 'kpi-highlight' : ''}">
                    <td>
                      <div class="kpi-week-label">${w.week}</div>
                      <div class="kpi-week-date">${w.date}</div>
                    </td>
                    <td><input type="number" value="${getKPI(w.week, 'abonnes')}" onchange="saveKPI('${w.week}', 'abonnes', this.value)" placeholder="0"></td>
                    <td><input type="number" value="${getKPI(w.week, 'inscrits')}" onchange="saveKPI('${w.week}', 'inscrits', this.value)" placeholder="0"></td>
                    <td><input type="number" value="${getKPI(w.week, 'ca')}" onchange="saveKPI('${w.week}', 'ca', this.value)" placeholder="0"></td>
                    <td><input type="text" class="notes-input" value="${getKPI(w.week, 'notes') || w.note}" onchange="saveKPI('${w.week}', 'notes', this.value)" placeholder="${w.note}"></td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        </div>
      `;

      updateKPISummary();
    }

    function exportKPI() {
      let csv = 'Semaine,Date,Abonnes IG,Inscrits,CA cumule,Notes\\n';
      kpiWeeks.forEach(w => {
        const d = kpiData[w.week] || {};
        csv += `${w.week},${w.date},${d.abonnes || ''},${d.inscrits || ''},${d.ca || ''},${d.notes || w.note}\\n`;
      });

      const blob = new Blob([csv], { type: 'text/csv' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'plaza-tango-kpi.csv';
      link.click();
    }

    // NEWSLETTER FUNCTIONS
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const sentEmails = JSON.parse(localStorage.getItem('plazaTangoSentEmails') || '{}');

    function renderNewsletterGrid() {
      const grid = document.getElementById('posts-grid');
      grid.className = 'posts-grid newsletter-grid';
      grid.innerHTML = '';

      // Masquer la filter bar pour les newsletters
      document.querySelector('.filter-bar').style.display = 'none';

      newslettersData.forEach(email => {
        const isSent = sentEmails[email.id] || false;
        const previewText = email.body.replace(/<[^>]+>/g, ' ').substring(0, 150) + '...';

        const card = document.createElement('div');
        card.className = 'email-card' + (isSent ? ' sent' : '');
        card.innerHTML = `
          <div class="email-header">
            <div class="email-type">${email.type}</div>
            <div class="email-subject">${email.subject}</div>
            <div class="email-preheader">${email.preheader}</div>
          </div>
          <div class="email-preview">
            <div class="email-preview-content">${previewText}</div>
          </div>
          <div class="email-info">
            <div class="email-date">${email.sendDate}</div>
            <div class="email-audience">
              <span class="audience-icon">üë•</span>
              <span>${email.audienceLabel}</span>
            </div>
          </div>
        `;
        card.onclick = () => openEmailModal(email.id);
        grid.appendChild(card);
      });
    }

    let currentEmailId = null;

    function openEmailModal(id) {
      const email = newslettersData.find(e => e.id === id);
      if (!email) return;

      currentEmailId = id;
      const isSent = sentEmails[id] || false;

      // Cr√©er le contenu du modal email
      const headerImage = email.image || 'assets/tango1.jpg';
      const modalContainer = document.getElementById('email-modal-container');
      modalContainer.innerHTML = `
        <div class="email-modal-content">
          <div class="email-modal-header">
            <div class="header-bg"><img src="${headerImage}" alt=""></div>
            <div class="header-overlay"></div>
            <div class="email-modal-logo"><img src="logo.png" alt=""></div>
            <div class="email-modal-title">PLAZA TANGO</div>
            <div class="email-modal-subtitle">Festival de Tango Argentin ¬∑ Belfort</div>
          </div>
          <div class="email-modal-body">
            ${email.body}
          </div>
          <div class="email-modal-footer">
            <p>Festival Plaza Tango ¬∑ Belfort, France</p>
            <p><a href="#">Se desinscrire</a> ¬∑ <a href="#">Voir en ligne</a></p>
          </div>
        </div>
        <div class="modal-sidebar" style="background: var(--bg-card); max-width: 320px;">
          <div class="sidebar-header">
            <div class="sidebar-phase">${email.type}</div>
            <h2 class="sidebar-title" style="font-size: 18px;">${email.subject.replace(/^[^\s]+\s/, '')}</h2>
            <div class="sidebar-date">${email.sendDate}</div>
          </div>

          <div class="sidebar-section">
            <div class="sidebar-section-title">Audience</div>
            <p style="color: rgba(255,255,255,0.7); font-size: 14px;">üë• ${email.audienceLabel}</p>
          </div>

          <div class="sidebar-section">
            <div class="sidebar-section-title">Objectif</div>
            <p style="color: rgba(255,255,255,0.7); font-size: 14px;">
              ${getEmailObjective(email.type)}
            </p>
          </div>

          <div class="sidebar-section">
            <div class="sidebar-status" onclick="toggleEmailSent(${id})">
              <div class="status-checkbox${isSent ? ' checked' : ''}">
                <svg viewBox="0 0 24 24" fill="none"><polyline points="20 6 9 17 4 12"/></svg>
              </div>
              <div class="status-text">
                <div class="status-label">${isSent ? 'Envoy√©' : '√Ä envoyer'}</div>
                <div class="status-hint">Cliquer pour changer le statut</div>
              </div>
            </div>
          </div>

          <div class="sidebar-actions">
            <button class="btn btn-primary btn-block" onclick="copyEmailHTML(${id})">üìã Copier HTML</button>
            <button class="btn btn-secondary btn-block" onclick="closeEmailModal()">Fermer</button>
          </div>
        </div>
      `;

      document.getElementById('email-modal').classList.add('active');
    }

    function closeEmailModal() {
      document.getElementById('email-modal').classList.remove('active');
      currentEmailId = null;
    }

    function getEmailObjective(type) {
      const objectives = {
        'LANCEMENT': 'Annoncer le festival et pousser les early birds',
        'MAESTROS': 'Pr√©senter la programmation et cr√©er l\'excitation',
        'URGENCE': 'Cr√©er l\'urgence pour les derni√®res places early bird',
        'ANCIENS PARTICIPANTS': 'Fid√©liser et offrir un avantage exclusif',
        'PROGRAMME': 'Informer et aider √† planifier',
        'LAST CALL': 'Convertir les ind√©cis avec la raret√©',
        'COMPTE √Ä REBOURS': 'Pr√©parer les participants et cr√©er l\'attente',
        'J-1': 'Derni√®res infos pratiques et excitation maximale'
      };
      return objectives[type] || 'Informer et engager';
    }

    function toggleEmailSent(id) {
      sentEmails[id] = !sentEmails[id];
      localStorage.setItem('plazaTangoSentEmails', JSON.stringify(sentEmails));
      openEmailModal(id);
      renderNewsletterGrid();
    }

    function copyEmailHTML(id) {
      const email = newslettersData.find(e => e.id === id);
      if (!email) return;

      const fullHTML = `
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${email.subject}</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
    h2 { color: #4A1A1F; }
    .highlight { background: #FFF8E7; padding: 20px; border-radius: 10px; border-left: 4px solid #C9A96E; margin: 20px 0; }
    .cta-btn { display: inline-block; background: #C9A96E; color: #000; padding: 15px 35px; border-radius: 50px; font-weight: bold; text-decoration: none; }
    ul { padding-left: 20px; }
    li { margin-bottom: 8px; }
  </style>
</head>
<body>
  ${email.body}
  <hr style="margin: 30px 0; border: none; border-top: 1px solid #eee;">
  <p style="font-size: 12px; color: #666; text-align: center;">
    Festival Plaza Tango ¬∑ Belfort, France<br>
    <a href="#">Se d√©sinscrire</a> ¬∑ <a href="#">Voir en ligne</a>
  </p>
</body>
</html>`;

      navigator.clipboard.writeText(fullHTML).then(() => {
        alert('HTML copi√© dans le presse-papier !');
      });
    }

    function getPhaseText(phase) {
      const phases = { 1: 'Phase 1 ¬∑ Annonces', 2: 'Phase 2 ¬∑ Maestros', 3: 'Phase 3 ¬∑ DJs & Milongas', 4: 'Phase 4 ¬∑ Countdown', 5: 'Phase 5 ¬∑ Festival', 6: 'Phase 6 ¬∑ Apr√®s' };
      return phases[phase] || 'Phase 1';
    }

    function openModal(id) {
      currentPostId = id;
      currentSlide = 0;

      const isStory = id > 100;
      const data = isStory ? storysData.find(p => p.id === id) : postsData.find(p => p.id === id);
      if (!data) return;

      const titleText = (data.title || '').replace(/<br>/g, ' ');
      const isPublished = publishedPosts[id] || false;

      document.getElementById('sidebar-phase').textContent = getPhaseText(data.phase);
      document.getElementById('sidebar-title').textContent = titleText;
      document.getElementById('sidebar-date').textContent = data.publishDate;
      document.getElementById('sidebar-description').textContent = data.description || data.instaDesc || '';

      const checkbox = document.getElementById('status-checkbox');
      const label = document.getElementById('status-label');
      checkbox.className = 'status-checkbox' + (isPublished ? ' checked' : '');
      label.textContent = isPublished ? 'Publi√©' : '√Ä publier';

      // Slides : pour les posts = visuel + (contenu si applicable) + (artiste si applicable) + CTA, pour storys = 1
      let slides;
      if (isStory) {
        slides = [{ type: 'visuel', name: 'Story', content: generatePostHTML(data, true) }];
        document.getElementById('slides-section').style.display = 'none';
        document.getElementById('btn-prev').style.display = 'none';
        document.getElementById('btn-next').style.display = 'none';
      } else {
        slides = [{ type: 'visuel', name: 'Visuel principal', content: generatePostHTML(data, false) }];
        // Slide de contenu d√©taill√© (pour les posts √©ducatifs)
        if (data.contentSlide && data.contentSlide.length > 0) {
          slides.push({ type: 'contenu', name: 'En savoir plus', content: generateContentSlide(data) });
        }
        if (data.artistKey) {
          slides.push({ type: 'texte', name: artistTexts[data.artistKey]?.title || '√Ä propos', content: generateCitationSlide(data) });
        }
        // Toujours ajouter le CTA √† la fin
        slides.push({ type: 'cta', name: 'Appel √† l\'action', content: generateCTASlide() });
        document.getElementById('slides-section').style.display = 'block';
        document.getElementById('btn-prev').style.display = 'flex';
        document.getElementById('btn-next').style.display = 'flex';
      }

      const slidesContainer = document.getElementById('carousel-slides');
      slidesContainer.innerHTML = slides.map((slide, i) => `
        <div class="carousel-slide${i === 0 ? ' active' : ''}" data-index="${i}">
          <div class="carousel-post-wrapper">
            <div class="carousel-post-inner">${slide.content}</div>
          </div>
          ${slides.length > 1 ? `<div class="carousel-dots">${slides.map((_, j) => `<div class="carousel-dot${j === i ? ' active' : ''}" onclick="goToSlide(${j})"></div>`).join('')}</div>` : ''}
        </div>
      `).join('');

      if (!isStory && slides.length > 1) {
        const getSlideIcon = (type) => {
          if (type === 'visuel') return 'üì∏';
          if (type === 'contenu') return 'üìù';
          if (type === 'texte') return 'üí¨';
          if (type === 'cta') return 'üéüÔ∏è';
          return 'üìÑ';
        };
        document.getElementById('sidebar-slides').innerHTML = slides.map((slide, i) => `
          <div class="slide-item${i === 0 ? ' active' : ''}" onclick="goToSlide(${i})">
            <div class="slide-thumb">${getSlideIcon(slide.type)}</div>
            <div class="slide-info">
              <div class="slide-type">${slide.type}</div>
              <div class="slide-name">${slide.name}</div>
            </div>
          </div>
        `).join('');
      } else {
        document.getElementById('sidebar-slides').innerHTML = '';
      }

      document.getElementById('modal').classList.add('active');
      document.body.style.overflow = 'hidden';
      requestAnimationFrame(scaleModalPost);
    }

    function scaleModalPost() {
      const slides = document.querySelectorAll('.carousel-post-inner');
      const isStory = currentPostId > 100;
      const baseWidth = 1080;
      const baseHeight = isStory ? 1920 : 1080;

      // Responsive : adapter selon la taille de l'√©cran
      const isMobile = window.innerWidth <= 768;
      const padding = isMobile ? 30 : 180;
      const maxScale = isMobile ? 1 : 0.6;

      // Calculer le scale bas√© sur la largeur ET la hauteur disponible
      const availableWidth = window.innerWidth - padding;
      const availableHeight = window.innerHeight - (isMobile ? 150 : 180);

      const scaleByWidth = availableWidth / baseWidth;
      const scaleByHeight = availableHeight / baseHeight;
      const scale = Math.min(scaleByWidth, scaleByHeight, maxScale);

      slides.forEach(slide => {
        slide.style.width = baseWidth + 'px';
        slide.style.height = baseHeight + 'px';
        slide.style.transform = `scale(${scale})`;
        slide.style.transformOrigin = 'top left';
        const wrapper = slide.parentElement;
        wrapper.style.width = (baseWidth * scale) + 'px';
        wrapper.style.height = (baseHeight * scale) + 'px';
      });
    }

    function closeModal() {
      document.getElementById('modal').classList.remove('active');
      document.body.style.overflow = '';
      currentPostId = null;
    }

    function goToSlide(index) {
      currentSlide = index;
      document.querySelectorAll('.carousel-slide').forEach((s, i) => s.classList.toggle('active', i === index));
      document.querySelectorAll('.carousel-dot').forEach((d, i) => d.classList.toggle('active', i === index));
      document.querySelectorAll('.slide-item').forEach((s, i) => s.classList.toggle('active', i === index));
    }

    function prevSlide() {
      const slides = document.querySelectorAll('.carousel-slide');
      goToSlide((currentSlide - 1 + slides.length) % slides.length);
    }

    function nextSlide() {
      const slides = document.querySelectorAll('.carousel-slide');
      goToSlide((currentSlide + 1) % slides.length);
    }

    function toggleCurrentPublished() {
      if (!currentPostId) return;
      publishedPosts[currentPostId] = !publishedPosts[currentPostId];
      localStorage.setItem('plazaTangoPublished', JSON.stringify(publishedPosts));
      const isPublished = publishedPosts[currentPostId];
      document.getElementById('status-checkbox').className = 'status-checkbox' + (isPublished ? ' checked' : '');
      document.getElementById('status-label').textContent = isPublished ? 'Publi√©' : '√Ä publier';
      renderGrid();
    }

    function changeImage(event) {
      const file = event.target.files[0];
      if (!file || !currentPostId) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        customImages[currentPostId] = e.target.result;
        localStorage.setItem('plazaTangoImages', JSON.stringify(customImages));
        // Refresh modal
        openModal(currentPostId);
        renderGrid();
      };
      reader.readAsDataURL(file);
    }

    async function downloadCurrent() {
      if (!currentPostId) return;
      await downloadPost(currentPostId, currentSlide);
    }

    async function downloadPost(id, slideIndex = 0) {
      const isStory = id > 100;
      const data = isStory ? storysData.find(p => p.id === id) : postsData.find(p => p.id === id);
      if (!data) return;

      const targetWidth = 1080;
      const targetHeight = isStory ? 1920 : 1080;

      // Cr√©er un container temporaire avec dimensions fixes
      const container = document.createElement('div');
      container.style.cssText = `
        position: fixed;
        left: -9999px;
        top: 0;
        width: ${targetWidth}px;
        height: ${targetHeight}px;
        overflow: hidden;
        z-index: 9999;
      `;
      document.body.appendChild(container);

      // G√©n√©rer le contenu selon le slide
      if (slideIndex === 0 || isStory) {
        container.innerHTML = generatePostHTML(data, isStory);
      } else if (data.contentSlide && slideIndex === 1) {
        container.innerHTML = generateContentSlide(data);
      } else if (data.artistKey && slideIndex === 1) {
        container.innerHTML = generateCitationSlide(data);
      } else {
        container.innerHTML = generateCTASlide();
      }

      const element = container.firstElementChild;
      if (!element) {
        document.body.removeChild(container);
        return;
      }

      // Forcer les dimensions exactes
      element.style.width = targetWidth + 'px';
      element.style.height = targetHeight + 'px';
      element.style.transform = 'none';
      element.style.position = 'relative';

      // Convertir object-fit:cover en background-image (fix html2canvas)
      const bgImages = element.querySelectorAll('.bg img, .bg-photo img, .photo-half img');
      bgImages.forEach(img => {
        const parent = img.parentElement;
        const src = img.src;
        parent.style.backgroundImage = `url(${src})`;
        parent.style.backgroundSize = 'cover';
        parent.style.backgroundPosition = 'center';
        img.style.visibility = 'hidden';
      });

      // Attendre le chargement des images
      const images = element.querySelectorAll('img');
      await Promise.all([...images].map(img => {
        return new Promise(resolve => {
          if (img.complete) resolve();
          else {
            img.onload = resolve;
            img.onerror = resolve;
          }
        });
      }));

      await new Promise(r => setTimeout(r, 500));

      try {
        const canvas = await html2canvas(element, {
          width: targetWidth,
          height: targetHeight,
          scale: 1,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#0d0506',
          logging: false,
          imageTimeout: 15000
        });

        // Cr√©er le lien de t√©l√©chargement
        const link = document.createElement('a');
        const prefix = isStory ? 'story' : 'post';
        let suffix = '';
        if (slideIndex === 1 && data.contentSlide) suffix = '-details';
        else if (slideIndex === 1 && data.artistKey) suffix = '-artiste';
        else if (slideIndex > 0) suffix = '-cta';
        link.download = `plaza-tango-${prefix}-${String((id % 100)).padStart(2, '0')}${suffix}.png`;

        canvas.toBlob(function(blob) {
          const url = URL.createObjectURL(blob);
          link.href = url;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(url);
        }, 'image/png', 1.0);

      } catch (error) {
        console.error('Erreur export:', error);
        alert('Erreur lors de l\'export. Essayez clic droit > Enregistrer l\'image.');
      }

      document.body.removeChild(container);
    }

    async function downloadAll() {
      const data = currentTab === 'posts' ? postsData : storysData;
      for (const post of data) {
        await downloadPost(post.id, 0);
        await new Promise(r => setTimeout(r, 400));
      }
    }

    // Tabs
    document.querySelectorAll('.tab').forEach(tab => {
      tab.onclick = () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentTab = tab.dataset.tab;

        // Afficher/masquer la filter bar selon le tab
        const filterBar = document.querySelector('.filter-bar');
        if (currentTab === 'newsletter') {
          filterBar.style.display = 'none';
        } else {
          filterBar.style.display = 'flex';
        }

        renderGrid();
      };
    });

    // Keyboard
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
        closeEmailModal();
      }
      if (e.key === 'ArrowLeft') prevSlide();
      if (e.key === 'ArrowRight') nextSlide();
    });

    window.addEventListener('resize', () => {
      applyThumbnailScale();
      if (currentPostId) scaleModalPost();
    });

    renderGrid();
  </script>
</body>
</html>
